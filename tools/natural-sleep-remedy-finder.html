<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Free Natural Sleep Remedy Finder - Discover evidence-based natural remedies for your specific sleep challenges. Get personalized recommendations for herbs, supplements, aromatherapy, and lifestyle changes without medication.">
    <meta name="keywords" content="natural sleep remedies, herbal sleep aids, lavender for sleep, chamomile sleep, natural insomnia treatment, sleep supplements, melatonin alternatives, non-drug sleep solutions, aromatherapy sleep, magnesium for sleep">
    <meta name="author" content="Spacire">
    <meta name="robots" content="index, follow">
    
    <title>Natural Sleep Remedy Finder - Evidence-Based Solutions | Spacire</title>
    
    <link rel="canonical" href="https://tools.spacire.com/natural-sleep-remedy-finder">
    
    <meta property="og:title" content="Natural Sleep Remedy Finder - Evidence-Based Natural Solutions">
    <meta property="og:description" content="Find the right natural sleep remedies for your specific challenges. Free quiz with personalized recommendations based on sleep science.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://tools.spacire.com/natural-sleep-remedy-finder">
    <meta property="og:site_name" content="Spacire Sleep Tools">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Natural Sleep Remedy Finder - Evidence-Based Natural Solutions">
    <meta name="twitter:description" content="Find the right natural sleep remedies for your specific sleep challenges.">
    
    <link rel="icon" type="image/png" href="images/favicon.png">
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Domine:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Natural Sleep Remedy Finder",
        "description": "Free tool to find evidence-based natural sleep remedies matched to your specific sleep challenges, symptoms, and preferences.",
        "url": "https://tools.spacire.com/natural-sleep-remedy-finder",
        "applicationCategory": "HealthApplication",
        "operatingSystem": "Web Browser",
        "offers": {"@type": "Offer", "price": "0", "priceCurrency": "GBP"},
        "publisher": {"@type": "Organization", "name": "Spacire", "url": "https://spacire.com"}
    }
    </script>
    
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
            {"@type": "Question", "name": "What are the best natural remedies for sleep?", "acceptedAnswer": {"@type": "Answer", "text": "The best natural sleep remedies depend on your specific challenges. Lavender aromatherapy helps with relaxation and anxiety-related sleep issues. Magnesium supplements support muscle relaxation. Chamomile tea promotes calmness. Weighted blankets provide deep pressure therapy for restlessness. The most effective approach combines multiple remedies tailored to your symptoms."}},
            {"@type": "Question", "name": "Is lavender effective for sleep?", "acceptedAnswer": {"@type": "Answer", "text": "Yes, research supports lavender's sleep benefits. Studies show inhaling lavender essential oil can improve sleep quality, reduce anxiety, and help people fall asleep faster. Lavender works through its calming effect on the nervous system. It's most effective as a pillow spray, room diffuser, or sleep spray applied 15-30 minutes before bed."}},
            {"@type": "Question", "name": "Can natural remedies replace sleep medication?", "acceptedAnswer": {"@type": "Answer", "text": "Natural remedies can be effective for mild to moderate sleep difficulties and may help reduce reliance on sleep medication for some people. However, they work best as part of good sleep hygiene. If you're currently taking prescription sleep medication, consult your doctor before making changes. Natural remedies are not substitutes for medical treatment of serious sleep disorders."}},
            {"@type": "Question", "name": "How long do natural sleep remedies take to work?", "acceptedAnswer": {"@type": "Answer", "text": "Results vary by remedy type. Aromatherapy with lavender or chamomile can have immediate calming effects within 15-30 minutes. Herbal teas work within 30-60 minutes. Supplements like magnesium or glycine may show benefits within days to weeks of consistent use. Creating a consistent bedtime routine with natural remedies typically shows full benefits after 2-4 weeks."}}
        ]
    }
    </script>
    
    <style>
        :root {
            --primary: #042548;
            --primary-light: #0a3a6b;
            --accent: #E0B252;
            --success: #d4edda;
            --success-dark: #155724;
            --warning: #fff3cd;
            --warning-dark: #856404;
            --error: #dc3545;
            --error-light: #f8d7da;
            --info-bg: #e7f3ff;
            --text-primary: #1a1a1a;
            --text-secondary: #555;
            --text-light: #888;
            --border: #e0e0e0;
            --hover: #f8f9fa;
            --font-primary: 'Domine', Georgia, serif;
            --radius-sm: 6px;
            --radius-md: 10px;
            --radius-lg: 16px;
            --shadow-sm: 0 2px 4px rgba(0,0,0,0.08);
            --shadow-md: 0 4px 12px rgba(0,0,0,0.1);
            --transition: all 0.2s ease;
            --leaf-green: #22c55e;
            --leaf-light: #dcfce7;
            --herb-purple: #8b5cf6;
            --herb-light: #ede9fe;
        }
        
        *, *::before, *::after { box-sizing: border-box; }
        body { margin: 0; padding: 0; font-family: var(--font-primary); background: #f5f5f5; color: var(--text-primary); line-height: 1.6; }
        
        .site-header { background: var(--primary); padding: 16px 0; position: sticky; top: 0; z-index: 100; }
        .header-content { max-width: 1200px; margin: 0 auto; padding: 0 20px; display: flex; justify-content: space-between; align-items: center; }
        .logo-link { text-decoration: none; }
        .logo-text { font-size: 22px; font-weight: 700; color: #fff; letter-spacing: 0.02em; }
        .header-nav { display: flex; gap: 28px; }
        .header-nav a { color: rgba(255,255,255,0.85); text-decoration: none; font-size: 14px; font-weight: 500; transition: var(--transition); }
        .header-nav a:hover { color: var(--accent); }
        .mobile-menu-btn { display: none; background: none; border: none; cursor: pointer; padding: 8px; flex-direction: column; gap: 5px; }
        .mobile-menu-btn span { display: block; width: 24px; height: 2px; background: #fff; transition: var(--transition); }
        .mobile-nav { display: none; background: var(--primary); padding: 16px 20px; border-top: 1px solid rgba(255,255,255,0.1); }
        .mobile-nav.active { display: block; }
        .mobile-nav a { display: block; color: rgba(255,255,255,0.85); text-decoration: none; padding: 12px 0; font-size: 14px; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .mobile-nav a:last-child { border-bottom: none; }
        .mobile-nav a:hover { color: var(--accent); }
        @media (max-width: 768px) { .header-nav { display: none; } .mobile-menu-btn { display: flex; } }
        
        .breadcrumb { background: var(--hover); padding: 12px 0; border-bottom: 1px solid var(--border); }
        .breadcrumb-content { max-width: 1200px; margin: 0 auto; padding: 0 20px; font-size: 13px; }
        .breadcrumb a { color: var(--primary); text-decoration: none; }
        .breadcrumb a:hover { text-decoration: underline; }
        .breadcrumb span { color: var(--text-light); margin: 0 8px; }
        
        .main-container { max-width: 900px; margin: 0 auto; padding: 40px 20px 60px; }
        .page-title { text-align: center; margin-bottom: 32px; }
        .page-title h1 { font-size: 28px; font-weight: 700; color: var(--primary); text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 12px; }
        .page-subtitle { font-size: 16px; color: var(--text-secondary); max-width: 600px; margin: 0 auto; }
        
        .tool-card { background: #fff; border: 1px solid var(--border); border-radius: var(--radius-lg); overflow: hidden; box-shadow: var(--shadow-md); }
        .tool-header { background: linear-gradient(135deg, var(--primary) 0%, var(--leaf-green) 100%); color: #fff; padding: 24px 28px; }
        .tool-header h2 { font-size: 18px; font-weight: 600; margin-bottom: 4px; }
        .tool-header p { font-size: 14px; opacity: 0.9; }
        .tool-body { padding: 28px; }
        
        .progress-container { margin-bottom: 28px; }
        .progress-steps { display: flex; justify-content: space-between; margin-bottom: 12px; }
        .progress-step { display: flex; flex-direction: column; align-items: center; flex: 1; }
        .step-circle { width: 32px; height: 32px; border-radius: 50%; background: var(--border); color: var(--text-light); display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: 600; transition: var(--transition); }
        .step-circle.active { background: var(--leaf-green); color: #fff; }
        .step-circle.completed { background: var(--primary); color: #fff; }
        .step-label { font-size: 11px; color: var(--text-light); margin-top: 6px; text-align: center; }
        .progress-bar { height: 4px; background: var(--border); border-radius: 2px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--primary), var(--leaf-green)); transition: width 0.3s ease; }
        
        .question-section { display: none; animation: fadeIn 0.4s ease; }
        .question-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .question-title { font-size: 18px; font-weight: 600; color: var(--primary); margin-bottom: 8px; }
        .question-subtitle { font-size: 14px; color: var(--text-secondary); margin-bottom: 24px; }
        
        .option-grid { display: grid; gap: 12px; }
        .option-grid.two-col { grid-template-columns: repeat(2, 1fr); }
        @media (max-width: 500px) { .option-grid.two-col { grid-template-columns: 1fr; } }
        
        .option-card { display: flex; align-items: center; gap: 14px; padding: 16px 18px; border: 2px solid var(--border); border-radius: var(--radius-md); cursor: pointer; transition: var(--transition); background: #fff; user-select: none; }
        .option-card:hover { border-color: var(--leaf-green); background: var(--leaf-light); }
        .option-card.selected { border-color: var(--leaf-green); background: var(--leaf-light); }
        .option-card input { display: none; }
        .option-check { width: 22px; height: 22px; border: 2px solid var(--border); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; transition: var(--transition); }
        .option-card.selected .option-check { background: var(--leaf-green); border-color: var(--leaf-green); }
        .option-card.selected .option-check::after { content: ''; width: 8px; height: 8px; background: #fff; border-radius: 50%; }
        .checkbox-option .option-check { border-radius: 4px; }
        .checkbox-option.selected .option-check::after { content: ''; width: 12px; height: 10px; background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='white'%3E%3Cpath d='M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z'/%3E%3C/svg%3E") center/contain no-repeat; border-radius: 0; }
        .option-icon { font-size: 24px; flex-shrink: 0; }
        .option-content { flex: 1; }
        .option-label { font-size: 15px; font-weight: 600; color: var(--text-primary); margin-bottom: 2px; }
        .option-desc { font-size: 12px; color: var(--text-light); }
        
        .nav-buttons { display: flex; gap: 12px; margin-top: 28px; justify-content: flex-end; }
        .btn { padding: 14px 28px; border-radius: var(--radius-md); font-family: var(--font-primary); font-size: 14px; font-weight: 600; cursor: pointer; transition: var(--transition); border: none; }
        .btn-primary { background: var(--leaf-green); color: #fff; }
        .btn-primary:hover { background: #16a34a; }
        .btn-primary:disabled { background: var(--border); color: var(--text-light); cursor: not-allowed; }
        .btn-secondary { background: #fff; color: var(--primary); border: 2px solid var(--border); }
        .btn-secondary:hover { border-color: var(--primary); }
        
        .results-section { display: none; }
        .results-section.active { display: block; animation: fadeIn 0.5s ease; }
        
        .result-header { text-align: center; padding: 32px; background: linear-gradient(135deg, var(--primary) 0%, var(--leaf-green) 100%); border-radius: var(--radius-lg); color: #fff; margin-bottom: 28px; }
        .result-label { font-size: 14px; text-transform: uppercase; letter-spacing: 0.1em; opacity: 0.9; margin-bottom: 8px; }
        .result-title { font-size: 28px; font-weight: 700; margin-bottom: 8px; }
        .result-subtitle { font-size: 16px; opacity: 0.9; }
        
        .remedy-card { background: #fff; border: 1px solid var(--border); border-radius: var(--radius-lg); overflow: hidden; margin-bottom: 24px; }
        .remedy-header { padding: 20px 24px; display: flex; align-items: center; gap: 16px; background: var(--leaf-light); }
        .remedy-icon { width: 60px; height: 60px; border-radius: 50%; background: var(--leaf-green); display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
        .remedy-icon svg { width: 28px; height: 28px; fill: #fff; }
        .remedy-info h3 { font-size: 18px; font-weight: 600; color: var(--primary); margin-bottom: 4px; }
        .remedy-info p { font-size: 14px; color: var(--text-secondary); }
        .remedy-match { background: var(--success); color: var(--success-dark); padding: 6px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; margin-left: auto; }
        .remedy-body { padding: 24px; }
        .remedy-section { margin-bottom: 20px; }
        .remedy-section:last-child { margin-bottom: 0; }
        .remedy-section-title { font-size: 14px; font-weight: 600; color: var(--primary); margin-bottom: 10px; display: flex; align-items: center; gap: 8px; }
        .remedy-section-title svg { width: 18px; height: 18px; fill: var(--leaf-green); }
        .remedy-section p { font-size: 14px; color: var(--text-secondary); line-height: 1.6; }
        .remedy-section ul { margin: 0; padding-left: 20px; }
        .remedy-section li { font-size: 14px; color: var(--text-secondary); margin-bottom: 6px; }
        
        .diy-box { background: var(--leaf-light); border-left: 4px solid var(--leaf-green); border-radius: 0 var(--radius-md) var(--radius-md) 0; padding: 16px 20px; margin-top: 16px; }
        .diy-title { font-size: 13px; font-weight: 600; color: var(--success-dark); margin-bottom: 8px; display: flex; align-items: center; gap: 6px; }
        .diy-box ul { margin: 0; padding-left: 18px; }
        .diy-box li { font-size: 13px; color: var(--text-secondary); margin-bottom: 4px; }
        
        .alternatives-section { margin-top: 24px; padding-top: 24px; border-top: 1px solid var(--border); }
        .alternatives-title { font-size: 16px; font-weight: 600; color: var(--primary); margin-bottom: 16px; }
        .alt-cards { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 12px; }
        .alt-card { background: var(--hover); border: 1px solid var(--border); border-radius: var(--radius-md); padding: 16px; text-align: center; }
        .alt-card-icon { width: 40px; height: 40px; border-radius: 50%; margin: 0 auto 8px; display: flex; align-items: center; justify-content: center; }
        .alt-card-icon svg { width: 20px; height: 20px; fill: #fff; }
        .alt-card-title { font-size: 13px; font-weight: 600; color: var(--text-primary); margin-bottom: 4px; }
        .alt-card-match { font-size: 11px; color: var(--text-light); }
        
        .section-title { font-size: 16px; font-weight: 600; color: var(--primary); margin-bottom: 16px; }
        
        .tip-card { background: #fff; border: 1px solid var(--border); border-radius: var(--radius-md); padding: 20px; margin-bottom: 16px; }
        .tip-card.priority-high { border-left: 4px solid var(--leaf-green); }
        .tip-card.priority-medium { border-left: 4px solid var(--accent); }
        .tip-card.priority-low { border-left: 4px solid #3b82f6; }
        .tip-header { display: flex; justify-content: space-between; align-items: start; margin-bottom: 10px; }
        .tip-title { font-size: 15px; font-weight: 600; color: var(--text-primary); }
        .priority-badge { font-size: 10px; font-weight: 600; text-transform: uppercase; padding: 4px 8px; border-radius: 4px; }
        .priority-badge.high { background: var(--leaf-light); color: var(--success-dark); }
        .priority-badge.medium { background: var(--warning); color: var(--warning-dark); }
        .priority-badge.low { background: var(--info-bg); color: #1e40af; }
        .tip-text { font-size: 14px; color: var(--text-secondary); line-height: 1.6; }
        
        .supplements-note { background: var(--herb-light); border: 1px solid #c4b5fd; border-radius: var(--radius-md); padding: 20px; margin-top: 24px; }
        .supplements-title { font-size: 15px; font-weight: 600; color: #5b21b6; margin-bottom: 10px; display: flex; align-items: center; gap: 8px; }
        .supplements-text { font-size: 14px; color: var(--text-secondary); line-height: 1.6; margin-bottom: 12px; }
        .supplements-list { margin: 0; padding-left: 20px; }
        .supplements-list li { font-size: 13px; color: var(--text-secondary); margin-bottom: 8px; }
        .supplements-list strong { color: #5b21b6; }
        
        .product-note { background: var(--hover); border: 1px solid var(--border); border-radius: var(--radius-md); padding: 20px; margin-top: 24px; }
        .product-note-title { font-size: 14px; font-weight: 600; color: var(--text-secondary); margin-bottom: 10px; }
        .product-note-text { font-size: 13px; color: var(--text-light); line-height: 1.6; margin-bottom: 12px; }
        .product-link-subtle { display: inline-block; color: var(--primary); text-decoration: none; font-size: 13px; font-weight: 500; }
        .product-link-subtle:hover { text-decoration: underline; }
        
        .email-capture { background: linear-gradient(135deg, #f8f9fa 0%, var(--leaf-light) 100%); border: 1px solid var(--border); border-radius: var(--radius-lg); padding: 28px; text-align: center; margin-top: 28px; }
        .email-capture-title { font-size: 18px; font-weight: 600; color: var(--primary); margin-bottom: 8px; }
        .email-capture-text { font-size: 14px; color: var(--text-secondary); margin-bottom: 20px; }
        .email-form { display: flex; gap: 12px; max-width: 500px; margin: 0 auto; flex-wrap: wrap; }
        .email-input { flex: 1; min-width: 140px; padding: 14px 16px; border: 2px solid var(--border); border-radius: var(--radius-md); font-family: var(--font-primary); font-size: 14px; transition: var(--transition); }
        .email-input:focus { outline: none; border-color: var(--leaf-green); }
        .email-success { display: none; color: var(--success-dark); font-weight: 600; margin-top: 12px; }
        .form-error { display: none; color: var(--error); font-size: 13px; margin-top: 8px; }
        @media (max-width: 500px) { .email-form { flex-direction: column; } .email-input { min-width: 100%; } }
        
        .safety-notice { background: var(--warning); border: 1px solid #ffc107; border-radius: var(--radius-md); padding: 20px; margin-top: 24px; }
        .safety-title { font-size: 14px; font-weight: 600; color: var(--warning-dark); margin-bottom: 8px; display: flex; align-items: center; gap: 8px; }
        .safety-text { font-size: 13px; color: var(--warning-dark); line-height: 1.6; }
        
        .info-section { margin-top: 40px; }
        .info-toggle { background: #fff; border: 1px solid var(--border); border-radius: var(--radius-md); margin-bottom: 12px; overflow: hidden; }
        .toggle-header { display: flex; justify-content: space-between; align-items: center; padding: 18px 24px; cursor: pointer; transition: var(--transition); }
        .toggle-header:hover { background: var(--hover); }
        .toggle-title { font-size: 15px; font-weight: 600; color: var(--primary); }
        .toggle-icon { font-size: 20px; color: var(--primary); transition: transform 0.3s ease; }
        .info-toggle.open .toggle-icon { transform: rotate(180deg); }
        .info-content { display: none; padding: 24px; background: #fff; border-top: 1px solid var(--border); }
        .info-content.open { display: block; animation: slideDown 0.3s ease; }
        @keyframes slideDown { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .info-content h4 { font-size: 15px; font-weight: 600; color: var(--primary); margin: 20px 0 10px; }
        .info-content h4:first-child { margin-top: 0; }
        .info-content p { font-size: 14px; color: var(--text-secondary); line-height: 1.7; margin-bottom: 12px; }
        .info-content ul { margin: 0 0 16px 0; padding-left: 20px; }
        .info-content li { font-size: 14px; color: var(--text-secondary); line-height: 1.6; margin-bottom: 6px; }
        .info-content a { color: var(--primary); }
        
        .tools-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; margin-top: 16px; }
        .tool-link-card { display: block; padding: 16px; background: var(--hover); border: 1px solid var(--border); border-radius: var(--radius-md); text-decoration: none; transition: var(--transition); }
        .tool-link-card:hover { border-color: var(--primary); }
        .tool-link-card h5 { font-size: 14px; font-weight: 600; color: var(--primary); margin-bottom: 4px; }
        .tool-link-card p { font-size: 12px; color: var(--text-secondary); margin: 0; }
        
        .share-buttons { display: flex; gap: 12px; flex-wrap: wrap; margin-top: 16px; }
        .share-btn { display: inline-flex; align-items: center; gap: 8px; padding: 10px 16px; border-radius: var(--radius-md); text-decoration: none; font-size: 13px; font-weight: 600; transition: var(--transition); }
        .share-btn svg { width: 18px; height: 18px; fill: currentColor; }
        .share-btn.twitter { background: #1DA1F2; color: #fff; }
        .share-btn.twitter:hover { background: #1a8cd8; }
        .share-btn.facebook { background: #4267B2; color: #fff; }
        .share-btn.facebook:hover { background: #365899; }
        .share-btn.whatsapp { background: #25D366; color: #fff; }
        .share-btn.whatsapp:hover { background: #20bd5a; }
        .share-btn.email-share { background: var(--primary); color: #fff; }
        .share-btn.email-share:hover { background: var(--primary-light); }
        .share-btn.copy { background: #fff; color: var(--primary); border: 2px solid var(--border); }
        .share-btn.copy:hover { border-color: var(--primary); }
        
        .site-footer { background: var(--primary); color: #fff; padding: 48px 0 24px; margin-top: 60px; }
        .footer-content { max-width: 1200px; margin: 0 auto; padding: 0 20px; }
        .footer-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 40px; margin-bottom: 40px; }
        .footer-section h4 { font-size: 14px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.1em; margin-bottom: 16px; color: var(--accent); }
        .footer-section a { display: block; color: rgba(255,255,255,0.8); text-decoration: none; font-size: 14px; margin-bottom: 10px; transition: var(--transition); }
        .footer-section a:hover { color: var(--accent); }
        .footer-bottom { padding-top: 24px; border-top: 1px solid rgba(255,255,255,0.1); text-align: center; font-size: 12px; color: rgba(255,255,255,0.6); }
        .footer-legal { margin-top: 12px; display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; }
        .footer-legal a { color: rgba(255,255,255,0.6); text-decoration: none; }
        .footer-legal a:hover { color: var(--accent); }
        @media (max-width: 768px) { .footer-grid { grid-template-columns: 1fr 1fr; gap: 24px; } }
        @media (max-width: 480px) { .footer-grid { grid-template-columns: 1fr; } }
    </style>
</head>

<body>
    <header class="site-header">
        <div class="header-content">
            <a href="https://tools.spacire.com" class="logo-link">
                <span class="logo-text">Spacire</span>
            </a>
            <nav class="header-nav">
                <a href="https://tools.spacire.com">All Tools</a>
                <a href="https://spacire.com/collections/sleep-aids-for-better-rest">Sleep Products</a>
                <a href="https://spacire.com/blogs/journal">Sleep Journal</a>
                <a href="https://spacire.com">Shop</a>
            </nav>
            <button class="mobile-menu-btn" aria-label="Toggle menu" onclick="toggleMobileMenu()">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
        <nav class="mobile-nav" id="mobileNav">
            <a href="https://tools.spacire.com">All Tools</a>
            <a href="https://spacire.com/collections/sleep-aids-for-better-rest">Sleep Products</a>
            <a href="https://spacire.com/blogs/journal">Sleep Journal</a>
            <a href="https://spacire.com">Shop</a>
        </nav>
    </header>
    
    <nav class="breadcrumb" aria-label="Breadcrumb">
        <div class="breadcrumb-content">
            <a href="https://spacire.com">Spacire</a>
            <span>&gt;</span>
            <a href="https://tools.spacire.com">Sleep Tools</a>
            <span>&gt;</span>
            <span style="color: var(--text-primary);">Natural Sleep Remedy Finder</span>
        </div>
    </nav>
    
    <main class="main-container">
        <header class="page-title">
            <h1>Natural Sleep Remedy Finder</h1>
            <p class="page-subtitle">Discover evidence-based natural remedies matched to your specific sleep challenges. No medication required.</p>
        </header>
        
        <div class="tool-card">
            <div class="tool-header">
                <h2>Find Your Natural Solution</h2>
                <p>Answer 5 quick questions about your sleep challenges</p>
            </div>
            
            <div class="tool-body">
                <div class="progress-container">
                    <div class="progress-steps">
                        <div class="progress-step"><div class="step-circle active" id="step1">1</div><span class="step-label">Challenge</span></div>
                        <div class="progress-step"><div class="step-circle" id="step2">2</div><span class="step-label">Symptoms</span></div>
                        <div class="progress-step"><div class="step-circle" id="step3">3</div><span class="step-label">Tried</span></div>
                        <div class="progress-step"><div class="step-circle" id="step4">4</div><span class="step-label">Preferences</span></div>
                        <div class="progress-step"><div class="step-circle" id="step5">5</div><span class="step-label">Goals</span></div>
                    </div>
                    <div class="progress-bar"><div class="progress-fill" id="progressFill" style="width: 20%;"></div></div>
                </div>
                
                <!-- Question 1: Primary Sleep Challenge -->
                <div class="question-section active" id="q1">
                    <h3 class="question-title">What's your main sleep challenge?</h3>
                    <p class="question-subtitle">Select the issue that affects you most</p>
                    <div class="option-grid two-col">
                        <div class="option-card" onclick="selectOption(1, 'falling-asleep')">
                            <input type="radio" name="q1" value="falling-asleep">
                            <span class="option-check"></span>
                            <span class="option-icon">&#128564;</span>
                            <span class="option-content">
                                <span class="option-label">Can't Fall Asleep</span>
                                <span class="option-desc">Takes 30+ minutes to drift off</span>
                            </span>
                        </div>
                        <div class="option-card" onclick="selectOption(1, 'staying-asleep')">
                            <input type="radio" name="q1" value="staying-asleep">
                            <span class="option-check"></span>
                            <span class="option-icon">&#127769;</span>
                            <span class="option-content">
                                <span class="option-label">Can't Stay Asleep</span>
                                <span class="option-desc">Wake up during the night</span>
                            </span>
                        </div>
                        <div class="option-card" onclick="selectOption(1, 'wake-early')">
                            <input type="radio" name="q1" value="wake-early">
                            <span class="option-check"></span>
                            <span class="option-icon">&#127749;</span>
                            <span class="option-content">
                                <span class="option-label">Wake Too Early</span>
                                <span class="option-desc">Can't get back to sleep</span>
                            </span>
                        </div>
                        <div class="option-card" onclick="selectOption(1, 'poor-quality')">
                            <input type="radio" name="q1" value="poor-quality">
                            <span class="option-check"></span>
                            <span class="option-icon">&#128148;</span>
                            <span class="option-content">
                                <span class="option-label">Poor Sleep Quality</span>
                                <span class="option-desc">Wake up feeling unrefreshed</span>
                            </span>
                        </div>
                    </div>
                    <div class="nav-buttons">
                        <button class="btn btn-primary" onclick="nextQuestion(1)" disabled id="nextBtn1">Continue</button>
                    </div>
                </div>
                
                <!-- Question 2: Secondary Symptoms -->
                <div class="question-section" id="q2">
                    <h3 class="question-title">Which of these do you experience?</h3>
                    <p class="question-subtitle">Select all that apply</p>
                    <div class="option-grid">
                        <div class="option-card checkbox-option" onclick="toggleCheckbox(event, this, 2)">
                            <input type="checkbox" name="q2" value="racing-thoughts">
                            <span class="option-check"></span>
                            <span class="option-icon">&#128173;</span>
                            <span class="option-content">
                                <span class="option-label">Racing Thoughts</span>
                                <span class="option-desc">Mind won't quiet down at night</span>
                            </span>
                        </div>
                        <div class="option-card checkbox-option" onclick="toggleCheckbox(event, this, 2)">
                            <input type="checkbox" name="q2" value="anxiety">
                            <span class="option-check"></span>
                            <span class="option-icon">&#128556;</span>
                            <span class="option-content">
                                <span class="option-label">Anxiety or Stress</span>
                                <span class="option-desc">Feeling worried or tense</span>
                            </span>
                        </div>
                        <div class="option-card checkbox-option" onclick="toggleCheckbox(event, this, 2)">
                            <input type="checkbox" name="q2" value="restlessness">
                            <span class="option-check"></span>
                            <span class="option-icon">&#128400;</span>
                            <span class="option-content">
                                <span class="option-label">Physical Restlessness</span>
                                <span class="option-desc">Can't get comfortable, fidgety</span>
                            </span>
                        </div>
                        <div class="option-card checkbox-option" onclick="toggleCheckbox(event, this, 2)">
                            <input type="checkbox" name="q2" value="temperature">
                            <span class="option-check"></span>
                            <span class="option-icon">&#127777;</span>
                            <span class="option-content">
                                <span class="option-label">Temperature Issues</span>
                                <span class="option-desc">Too hot or too cold</span>
                            </span>
                        </div>
                        <div class="option-card checkbox-option" onclick="toggleCheckbox(event, this, 2)">
                            <input type="checkbox" name="q2" value="pain">
                            <span class="option-check"></span>
                            <span class="option-icon">&#129657;</span>
                            <span class="option-content">
                                <span class="option-label">Pain or Discomfort</span>
                                <span class="option-desc">Aches, tension, or soreness</span>
                            </span>
                        </div>
                        <div class="option-card checkbox-option" onclick="toggleCheckbox(event, this, 2)">
                            <input type="checkbox" name="q2" value="none">
                            <span class="option-check"></span>
                            <span class="option-icon">&#10004;</span>
                            <span class="option-content">
                                <span class="option-label">None of These</span>
                                <span class="option-desc">Just general sleep trouble</span>
                            </span>
                        </div>
                    </div>
                    <div class="nav-buttons">
                        <button class="btn btn-secondary" onclick="prevQuestion(2)">Back</button>
                        <button class="btn btn-primary" onclick="nextQuestion(2)">Continue</button>
                    </div>
                </div>
                
                <!-- Question 3: What Have You Tried -->
                <div class="question-section" id="q3">
                    <h3 class="question-title">What have you already tried?</h3>
                    <p class="question-subtitle">Select all that apply (helps us suggest new approaches)</p>
                    <div class="option-grid">
                        <div class="option-card checkbox-option" onclick="toggleCheckbox(event, this, 3)">
                            <input type="checkbox" name="q3" value="herbal-tea">
                            <span class="option-check"></span>
                            <span class="option-icon">&#9749;</span>
                            <span class="option-content">
                                <span class="option-label">Herbal Tea</span>
                                <span class="option-desc">Chamomile, valerian, etc.</span>
                            </span>
                        </div>
                        <div class="option-card checkbox-option" onclick="toggleCheckbox(event, this, 3)">
                            <input type="checkbox" name="q3" value="aromatherapy">
                            <span class="option-check"></span>
                            <span class="option-icon">&#127803;</span>
                            <span class="option-content">
                                <span class="option-label">Aromatherapy</span>
                                <span class="option-desc">Essential oils, diffusers</span>
                            </span>
                        </div>
                        <div class="option-card checkbox-option" onclick="toggleCheckbox(event, this, 3)">
                            <input type="checkbox" name="q3" value="supplements">
                            <span class="option-check"></span>
                            <span class="option-icon">&#128138;</span>
                            <span class="option-content">
                                <span class="option-label">Supplements</span>
                                <span class="option-desc">Melatonin, magnesium, etc.</span>
                            </span>
                        </div>
                        <div class="option-card checkbox-option" onclick="toggleCheckbox(event, this, 3)">
                            <input type="checkbox" name="q3" value="weighted-blanket">
                            <span class="option-check"></span>
                            <span class="option-icon">&#128716;</span>
                            <span class="option-content">
                                <span class="option-label">Weighted Blanket</span>
                                <span class="option-desc">Deep pressure therapy</span>
                            </span>
                        </div>
                        <div class="option-card checkbox-option" onclick="toggleCheckbox(event, this, 3)">
                            <input type="checkbox" name="q3" value="sleep-mask">
                            <span class="option-check"></span>
                            <span class="option-icon">&#128065;</span>
                            <span class="option-content">
                                <span class="option-label">Sleep Mask</span>
                                <span class="option-desc">Light blocking</span>
                            </span>
                        </div>
                        <div class="option-card checkbox-option" onclick="toggleCheckbox(event, this, 3)">
                            <input type="checkbox" name="q3" value="nothing">
                            <span class="option-check"></span>
                            <span class="option-icon">&#128075;</span>
                            <span class="option-content">
                                <span class="option-label">Nothing Yet</span>
                                <span class="option-desc">This is my first step</span>
                            </span>
                        </div>
                    </div>
                    <div class="nav-buttons">
                        <button class="btn btn-secondary" onclick="prevQuestion(3)">Back</button>
                        <button class="btn btn-primary" onclick="nextQuestion(3)">Continue</button>
                    </div>
                </div>
                
                <!-- Question 4: Preferences -->
                <div class="question-section" id="q4">
                    <h3 class="question-title">What are your preferences?</h3>
                    <p class="question-subtitle">Select all that apply</p>
                    <div class="option-grid">
                        <div class="option-card checkbox-option" onclick="toggleCheckbox(event, this, 4)">
                            <input type="checkbox" name="q4" value="love-scents">
                            <span class="option-check"></span>
                            <span class="option-icon">&#127804;</span>
                            <span class="option-content">
                                <span class="option-label">Love Scents</span>
                                <span class="option-desc">Enjoy aromatherapy and fragrances</span>
                            </span>
                        </div>
                        <div class="option-card checkbox-option" onclick="toggleCheckbox(event, this, 4)">
                            <input type="checkbox" name="q4" value="scent-sensitive">
                            <span class="option-check"></span>
                            <span class="option-icon">&#128683;</span>
                            <span class="option-content">
                                <span class="option-label">Scent Sensitive</span>
                                <span class="option-desc">Prefer unscented or mild options</span>
                            </span>
                        </div>
                        <div class="option-card checkbox-option" onclick="toggleCheckbox(event, this, 4)">
                            <input type="checkbox" name="q4" value="quick-fix">
                            <span class="option-check"></span>
                            <span class="option-icon">&#9889;</span>
                            <span class="option-content">
                                <span class="option-label">Quick Solutions</span>
                                <span class="option-desc">Want fast-acting remedies</span>
                            </span>
                        </div>
                        <div class="option-card checkbox-option" onclick="toggleCheckbox(event, this, 4)">
                            <input type="checkbox" name="q4" value="gradual">
                            <span class="option-check"></span>
                            <span class="option-icon">&#128336;</span>
                            <span class="option-content">
                                <span class="option-label">Gradual Approach</span>
                                <span class="option-desc">Patient with building habits</span>
                            </span>
                        </div>
                        <div class="option-card checkbox-option" onclick="toggleCheckbox(event, this, 4)">
                            <input type="checkbox" name="q4" value="budget-conscious">
                            <span class="option-check"></span>
                            <span class="option-icon">&#128176;</span>
                            <span class="option-content">
                                <span class="option-label">Budget-Conscious</span>
                                <span class="option-desc">Prefer free or low-cost options</span>
                            </span>
                        </div>
                        <div class="option-card checkbox-option" onclick="toggleCheckbox(event, this, 4)">
                            <input type="checkbox" name="q4" value="willing-invest">
                            <span class="option-check"></span>
                            <span class="option-icon">&#11088;</span>
                            <span class="option-content">
                                <span class="option-label">Willing to Invest</span>
                                <span class="option-desc">Quality products are worth it</span>
                            </span>
                        </div>
                    </div>
                    <div class="nav-buttons">
                        <button class="btn btn-secondary" onclick="prevQuestion(4)">Back</button>
                        <button class="btn btn-primary" onclick="nextQuestion(4)">Continue</button>
                    </div>
                </div>
                
                <!-- Question 5: Goals -->
                <div class="question-section" id="q5">
                    <h3 class="question-title">What's most important to you?</h3>
                    <p class="question-subtitle">Select your top priority</p>
                    <div class="option-grid">
                        <div class="option-card" onclick="selectOption(5, 'fall-asleep-faster')">
                            <input type="radio" name="q5" value="fall-asleep-faster">
                            <span class="option-check"></span>
                            <span class="option-icon">&#128164;</span>
                            <span class="option-content">
                                <span class="option-label">Fall Asleep Faster</span>
                                <span class="option-desc">Reduce time to fall asleep</span>
                            </span>
                        </div>
                        <div class="option-card" onclick="selectOption(5, 'stay-asleep')">
                            <input type="radio" name="q5" value="stay-asleep">
                            <span class="option-check"></span>
                            <span class="option-icon">&#127769;</span>
                            <span class="option-content">
                                <span class="option-label">Stay Asleep Longer</span>
                                <span class="option-desc">Fewer nighttime awakenings</span>
                            </span>
                        </div>
                        <div class="option-card" onclick="selectOption(5, 'deeper-sleep')">
                            <input type="radio" name="q5" value="deeper-sleep">
                            <span class="option-check"></span>
                            <span class="option-icon">&#128171;</span>
                            <span class="option-content">
                                <span class="option-label">Deeper, More Restful Sleep</span>
                                <span class="option-desc">Better sleep quality overall</span>
                            </span>
                        </div>
                        <div class="option-card" onclick="selectOption(5, 'reduce-anxiety')">
                            <input type="radio" name="q5" value="reduce-anxiety">
                            <span class="option-check"></span>
                            <span class="option-icon">&#128524;</span>
                            <span class="option-content">
                                <span class="option-label">Reduce Bedtime Anxiety</span>
                                <span class="option-desc">Feel calmer before sleep</span>
                            </span>
                        </div>
                    </div>
                    <div class="nav-buttons">
                        <button class="btn btn-secondary" onclick="prevQuestion(5)">Back</button>
                        <button class="btn btn-primary" onclick="generateResults()" disabled id="nextBtn5">Find My Remedies</button>
                    </div>
                </div>
                
                <!-- Results Section -->
                <div class="results-section" id="resultsSection">
                    <div id="resultsContent"></div>
                </div>
            </div>
        </div>
        
        <!-- Info Toggles -->
        <section class="info-section">
            <div class="info-toggle">
                <div class="toggle-header" onclick="toggleInfo(this)">
                    <span class="toggle-title">How It Works</span>
                    <span class="toggle-icon">&#9660;</span>
                </div>
                <div class="info-content">
                    <h4>Our Matching Process</h4>
                    <ul>
                        <li><strong>Step 1:</strong> Identify your primary sleep challenge (falling asleep, staying asleep, etc.)</li>
                        <li><strong>Step 2:</strong> Understand secondary symptoms (anxiety, restlessness, pain)</li>
                        <li><strong>Step 3:</strong> Learn what you've already tried to avoid repeating</li>
                        <li><strong>Step 4:</strong> Consider your preferences (scent sensitivity, budget, timeline)</li>
                        <li><strong>Step 5:</strong> Match evidence-based remedies to your unique profile</li>
                    </ul>
                    
                    <h4>Evidence-Based Approach</h4>
                    <p>Our recommendations are based on published research from peer-reviewed journals, clinical studies, and guidance from sleep medicine organizations. We prioritize remedies with demonstrated effectiveness and good safety profiles.</p>
                    
                    <h4>Why Natural Remedies?</h4>
                    <p>Natural sleep remedies can be effective for mild to moderate sleep difficulties without the side effects or dependency concerns of some sleep medications. They work best as part of an overall sleep hygiene strategy, not as standalone solutions.</p>
                </div>
            </div>
            
            <div class="info-toggle">
                <div class="toggle-header" onclick="toggleInfo(this)">
                    <span class="toggle-title">About This Tool</span>
                    <span class="toggle-icon">&#9660;</span>
                </div>
                <div class="info-content">
                    <h4>Our Mission</h4>
                    <p>We created the Natural Sleep Remedy Finder to help people discover evidence-based, non-pharmaceutical approaches to better sleep. Too often, people resort to medication without exploring effective natural alternatives first.</p>
                    
                    <h4>What We Do With Your Data</h4>
                    <p>Your assessment responses are processed entirely in your browser - we do not store your answers on our servers unless you choose to receive a report via email. If you opt in to receive an email report, we store only your first name, email address, and assessment results to deliver your report.</p>
                    
                    <h4>About Spacire</h4>
                    <p>Spacire is a sleep wellness company dedicated to helping people achieve better rest through natural, science-backed solutions. We offer sleep masks, white noise machines, blackout curtains, aromatherapy sprays, and weighted blankets.</p>
                    <p><a href="https://spacire.com/pages/about-us" target="_blank" rel="noopener">Learn more about Spacire</a></p>
                </div>
            </div>
            
            <div class="info-toggle">
                <div class="toggle-header" onclick="toggleInfo(this)">
                    <span class="toggle-title">Share This Tool</span>
                    <span class="toggle-icon">&#9660;</span>
                </div>
                <div class="info-content">
                    <h4>Help Others Sleep Better</h4>
                    <p>If you found this tool helpful, please share it with friends, family, or colleagues who might benefit from finding natural sleep solutions.</p>
                    <div class="share-buttons">
                        <a href="https://twitter.com/intent/tweet?url=https://tools.spacire.com/natural-sleep-remedy-finder&text=Free%20Natural%20Sleep%20Remedy%20Finder%20-%20Find%20evidence-based%20solutions%20for%20your%20sleep%20challenges" target="_blank" rel="noopener noreferrer" class="share-btn twitter">
                            <svg viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
                            Share on X
                        </a>
                        <a href="https://www.facebook.com/sharer/sharer.php?u=https://tools.spacire.com/natural-sleep-remedy-finder" target="_blank" rel="noopener noreferrer" class="share-btn facebook">
                            <svg viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>
                            Share on Facebook
                        </a>
                        <a href="https://wa.me/?text=Free%20Natural%20Sleep%20Remedy%20Finder%20-%20Find%20evidence-based%20solutions%20for%20your%20sleep%20challenges%20https://tools.spacire.com/natural-sleep-remedy-finder" target="_blank" rel="noopener noreferrer" class="share-btn whatsapp">
                            <svg viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>
                            WhatsApp
                        </a>
                        <a href="mailto:?subject=Free Natural Sleep Remedy Finder&body=I thought you might find this helpful - a free tool to find evidence-based natural sleep remedies: https://tools.spacire.com/natural-sleep-remedy-finder" class="share-btn email-share">
                            <svg viewBox="0 0 24 24"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/></svg>
                            Email
                        </a>
                        <button class="share-btn copy" onclick="copyLink()">
                            <svg viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>
                            Copy Link
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="info-toggle">
                <div class="toggle-header" onclick="toggleInfo(this)">
                    <span class="toggle-title">More Great Tools</span>
                    <span class="toggle-icon">&#9660;</span>
                </div>
                <div class="info-content">
                    <p>Explore our other free sleep tools:</p>
                    <div class="tools-grid">
                        <a href="https://tools.spacire.com/sleep-environment-optimizer" class="tool-link-card">
                            <h5>Sleep Environment Optimizer</h5>
                            <p>Assess your bedroom for optimal sleep conditions</p>
                        </a>
                        <a href="https://tools.spacire.com/shift-worker-sleep-planner" class="tool-link-card">
                            <h5>Shift Worker Sleep Planner</h5>
                            <p>Get personalized sleep schedules for shift work</p>
                        </a>
                        <a href="https://tools.spacire.com/sleep-debt-calculator" class="tool-link-card">
                            <h5>Sleep Debt Calculator</h5>
                            <p>Track your sleep debt and get a recovery plan</p>
                        </a>
                        <a href="https://tools.spacire.com/bedtime-routine-builder" class="tool-link-card">
                            <h5>Bedtime Routine Builder</h5>
                            <p>Create a personalized wind-down routine</p>
                        </a>
                        <a href="https://tools.spacire.com/sleep-sound-finder" class="tool-link-card">
                            <h5>Sleep Sound Finder</h5>
                            <p>Discover your ideal sleep sounds</p>
                        </a>
                    </div>
                </div>
            </div>
        </section>
    </main>
    
    <footer class="site-footer">
        <div class="footer-content">
            <div class="footer-grid">
                <div class="footer-section">
                    <h4>Sleep Tools</h4>
                    <a href="https://tools.spacire.com/sleep-environment-optimizer">Sleep Environment Optimizer</a>
                    <a href="https://tools.spacire.com/shift-worker-sleep-planner">Shift Worker Sleep Planner</a>
                    <a href="https://tools.spacire.com/sleep-debt-calculator">Sleep Debt Calculator</a>
                    <a href="https://tools.spacire.com/bedtime-routine-builder">Bedtime Routine Builder</a>
                    <a href="https://tools.spacire.com/sleep-sound-finder">Sleep Sound Finder</a>
                    <a href="https://tools.spacire.com/natural-sleep-remedy-finder">Natural Sleep Remedy Finder</a>
                </div>
                <div class="footer-section">
                    <h4>Shop</h4>
                    <a href="https://spacire.com/collections/sleep-masks">Sleep Masks</a>
                    <a href="https://spacire.com/collections/white-noise-machines">White Noise Machines</a>
                    <a href="https://spacire.com/collections/blackout-curtains">Blackout Curtains</a>
                    <a href="https://spacire.com/collections/pillow-sleep-sprays">Sleep Sprays</a>
                    <a href="https://spacire.com/collections/weighted-blankets">Weighted Blankets</a>
                </div>
                <div class="footer-section">
                    <h4>Company</h4>
                    <a href="https://spacire.com/pages/about-us">About Us</a>
                    <a href="https://spacire.com/pages/contact">Contact</a>
                    <a href="https://spacire.com/pages/faqs">FAQs</a>
                    <a href="https://spacire.com/blogs/journal">Sleep Journal</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Spacire (The Valen Collective LTD). Company Registered in England &amp; Wales. Reg: 16695657. 167 Kennington Road, Nottingham, NG8 1QE, UK.</p>
                <div class="footer-legal">
                    <a href="https://spacire.com/policies/privacy-policy">Privacy Policy</a>
                    <a href="https://spacire.com/policies/terms-of-service">Terms of Service</a>
                    <a href="https://spacire.com/policies/refund-policy">Refunds</a>
                    <a href="https://spacire.com/policies/shipping-policy">Shipping</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Appwrite SDK -->
    <script src="https://cdn.jsdelivr.net/npm/appwrite@14.0.1"></script>
    
    <script>
        // ========================================
        // CONFIGURATION
        // ========================================
        const CONFIG = {
            endpoint: 'https://nyc.cloud.appwrite.io/v1',
            projectId: 'spacire-sleep-tools',
            databaseId: 'sleeptools_db',
            tableId: 'tool_submissions',
            functionId: 'send_sleep_report'
        };
        
        // Initialize Appwrite
        const client = new Appwrite.Client()
            .setEndpoint(CONFIG.endpoint)
            .setProject(CONFIG.projectId);
        
        const databases = new Appwrite.Databases(client);
        const functions = new Appwrite.Functions(client);
        
        // ========================================
        // USER DATA STORAGE
        // ========================================
        let userData = {
            primaryChallenge: null,
            symptoms: [],
            triedBefore: [],
            preferences: [],
            goal: null
        };
        
        let calculatedResults = null;
        
        // ========================================
        // REMEDIES DATABASE (User-First, Evidence-Based)
        // ========================================
        const REMEDIES = {
            breathingTechniques: {
                name: '4-7-8 Breathing Technique',
                category: 'Free Relaxation Practice',
                icon: 'breath',
                color: '#06b6d4',
                description: 'A powerful, free technique that calms your nervous system in minutes',
                howItWorks: 'Controlled breathing activates the vagus nerve and parasympathetic nervous system, reducing heart rate and blood pressure. The 4-7-8 pattern forces you to slow down, and the held breath increases CO2 which has a calming effect.',
                bestFor: ['racing-thoughts', 'anxiety', 'falling-asleep'],
                evidence: 'Multiple studies support breathing techniques for sleep. Research shows slow, deep breathing can reduce cortisol levels by up to 50% and improve sleep onset. The 4-7-8 technique was popularized by Dr. Andrew Weil based on ancient yogic practices.',
                howToUse: ['Inhale quietly through your nose for 4 seconds', 'Hold your breath for 7 seconds', 'Exhale completely through your mouth for 8 seconds', 'Repeat 3-4 cycles'],
                diyTips: ['Practice during the day first to build the habit', 'Do it lying in bed with eyes closed', 'Combine with progressive muscle relaxation for deeper effect', 'Use consistently - benefits increase with practice'],
                isFree: true
            },
            temperatureControl: {
                name: 'Bedroom Temperature Optimization',
                category: 'Free Environment Change',
                icon: 'temperature',
                color: '#0ea5e9',
                description: 'Simple adjustments that signal your body its time to sleep',
                howItWorks: 'Your core body temperature naturally drops 1-2 degrees as you fall asleep. Keeping your bedroom cool (16-19C / 60-67F) supports this process. A warm shower before bed also helps - it causes blood vessels to dilate, releasing heat and cooling your core.',
                bestFor: ['temperature', 'staying-asleep', 'poor-quality'],
                evidence: 'Research shows the optimal bedroom temperature for sleep is 16-19C (60-67F). A study in Sleep Medicine Reviews found that a cooler environment significantly improved deep sleep duration.',
                howToUse: ['Set thermostat to 16-19C (60-67F) at night', 'Open a window for fresh, cool air', 'Use lighter bedding than you think you need', 'Take a warm bath/shower 1-2 hours before bed'],
                diyTips: ['Put a fan near your bed for air circulation', 'Sleep with cotton or linen sheets (not synthetic)', 'Keep a glass of cool water by your bed', 'Wear light, breathable sleepwear or sleep nude'],
                isFree: true
            },
            lavender: {
                name: 'Lavender Aromatherapy',
                category: 'Aromatherapy',
                icon: 'flower',
                color: '#a855f7',
                description: 'One of the most researched natural sleep aids with calming properties',
                howItWorks: 'Lavender contains linalool and linalyl acetate, compounds that interact with the GABA system to produce calming effects. Inhaling lavender activates the parasympathetic nervous system, lowering heart rate and promoting relaxation.',
                bestFor: ['falling-asleep', 'anxiety', 'racing-thoughts'],
                evidence: 'A 2015 study in the Journal of Alternative and Complementary Medicine found lavender improved sleep quality by 45%. Multiple studies confirm its anxiety-reducing effects with no side effects reported.',
                howToUse: ['Apply 15-30 minutes before bed for best effect', 'Use a diffuser for consistent scent throughout the night', 'Try lavender pillow spray or sachets', 'Dilute essential oil before applying to skin'],
                diyTips: ['Grow lavender on your windowsill for free access', 'Dry lavender flowers and place in a cloth bag under your pillow', 'Add a few drops of lavender oil to a warm bath', 'Make your own linen spray with water and a few drops of oil'],
                isFree: false
            },
            magnesium: {
                name: 'Magnesium Supplementation',
                category: 'Supplement (Not Sold by Spacire)',
                icon: 'supplement',
                color: '#10b981',
                description: 'An essential mineral many people lack, with proven sleep benefits',
                howItWorks: 'Magnesium plays a role in over 300 enzymatic reactions including those that regulate sleep. It activates the parasympathetic nervous system, helps regulate melatonin, and binds to GABA receptors to quiet nerve activity.',
                bestFor: ['restlessness', 'staying-asleep', 'pain', 'poor-quality'],
                evidence: 'Research in the Journal of Research in Medical Sciences found that magnesium supplementation improved sleep quality, sleep time, and reduced early morning awakening. Up to 50% of people may have inadequate magnesium intake.',
                howToUse: ['Magnesium glycinate is best tolerated for sleep (200-400mg)', 'Take 30-60 minutes before bed', 'Start with a lower dose and increase gradually', 'Topical magnesium (oil, lotion) can also help'],
                diyTips: ['Eat magnesium-rich foods: dark chocolate, almonds, spinach, bananas, avocados', 'Take Epsom salt (magnesium sulfate) baths before bed', 'Reduce alcohol and caffeine which deplete magnesium', 'Check with your doctor before starting any supplement'],
                isFree: false,
                notSold: true,
                buyingTip: 'Look for magnesium glycinate or magnesium bisglycinate at your local pharmacy or health food store. Avoid magnesium oxide which is poorly absorbed.'
            },
            chamomile: {
                name: 'Chamomile Tea',
                category: 'Herbal Remedy',
                icon: 'tea',
                color: '#fbbf24',
                description: 'A gentle, time-tested herb that promotes calmness',
                howItWorks: 'Chamomile contains apigenin, an antioxidant that binds to certain receptors in the brain that decrease anxiety and initiate sleep. It has been used as a sleep aid for thousands of years across many cultures.',
                bestFor: ['falling-asleep', 'anxiety', 'poor-quality'],
                evidence: 'A 2017 study found chamomile extract significantly improved sleep quality in elderly people. Research in Phytomedicine showed chamomile reduces anxiety by modulating GABA receptors - similar to some anti-anxiety medications but without side effects.',
                howToUse: ['Drink chamomile tea 30-60 minutes before bed', 'Steep for 5-10 minutes for maximum benefit', 'Use 2-3 teaspoons of dried chamomile per cup', 'Combine with honey for enhanced relaxation'],
                diyTips: ['Buy loose dried chamomile flowers (cheaper than tea bags)', 'Create a bedtime ritual around your evening tea', 'Grow chamomile in your garden - its very easy', 'Try combining with other calming herbs like passionflower'],
                isFree: false
            },
            glycine: {
                name: 'Glycine',
                category: 'Supplement (Not Sold by Spacire)',
                icon: 'supplement',
                color: '#8b5cf6',
                description: 'An amino acid that lowers body temperature and improves sleep quality',
                howItWorks: 'Glycine is an amino acid that lowers core body temperature by dilating blood vessels in the extremities. It also increases serotonin production and may improve how quickly you reach REM sleep.',
                bestFor: ['temperature', 'poor-quality', 'falling-asleep'],
                evidence: 'A study in Sleep and Biological Rhythms found that 3g of glycine before bed improved subjective sleep quality and reduced daytime sleepiness. Participants felt more refreshed upon waking.',
                howToUse: ['Take 3 grams about 30-60 minutes before bed', 'Can be taken as powder dissolved in water (slightly sweet taste)', 'Generally very safe with few side effects', 'Can also help with exercise recovery'],
                diyTips: ['Glycine is found naturally in bone broth - try drinking a cup before bed', 'Foods high in glycine: gelatin, chicken skin, pork skin, beef', 'Collagen supplements contain high amounts of glycine', 'Glycine powder is inexpensive and widely available'],
                isFree: false,
                notSold: true,
                buyingTip: 'Look for pure glycine powder at health food stores or online. Its one of the most affordable sleep supplements available.'
            },
            weightedBlanket: {
                name: 'Weighted Blanket',
                category: 'Deep Pressure Therapy',
                icon: 'blanket',
                color: '#3b82f6',
                description: 'Provides gentle pressure that calms the nervous system like a hug',
                howItWorks: 'Deep pressure stimulation triggers the release of serotonin and dopamine while reducing cortisol (stress hormone). This mimics the feeling of being held or hugged, activating the parasympathetic nervous system.',
                bestFor: ['restlessness', 'anxiety', 'staying-asleep', 'poor-quality'],
                evidence: 'A 2020 study in the Journal of Clinical Sleep Medicine found that weighted blankets significantly improved sleep for people with insomnia and anxiety. 78% of participants preferred the weighted blanket and had calmer nights.',
                howToUse: ['Choose a blanket 7-12% of your body weight', 'Use every night for best results', 'Cover your entire body from shoulders to feet', 'May take a few nights to adjust to the weight'],
                diyTips: ['Start with a lighter weight if youre new to this', 'Ensure your bed frame can support the extra weight', 'Layer regular blankets for a similar (though less effective) effect', 'Some people find just covering their chest/torso helpful'],
                isFree: false
            },
            sleepMask: {
                name: 'Sleep Mask',
                category: 'Light Blocking',
                icon: 'mask',
                color: '#1e293b',
                description: 'Creates darkness anywhere to support melatonin production',
                howItWorks: 'Even small amounts of light can suppress melatonin production by up to 50%. A quality sleep mask creates complete darkness, signaling to your brain that its time to sleep. This is especially helpful if you cant fully darken your room.',
                bestFor: ['falling-asleep', 'wake-early', 'poor-quality'],
                evidence: 'Research shows that sleeping in complete darkness improves sleep quality and duration. Light exposure at night disrupts circadian rhythms and can delay sleep onset by up to 30 minutes.',
                howToUse: ['Choose a contoured mask that doesnt press on your eyes', 'Ensure complete light blockage around the nose bridge', 'Use consistently every night for best results', 'Keep one in your travel bag for hotels'],
                diyTips: ['First, make your bedroom as dark as possible (cheaper than a mask)', 'Cover LED lights on electronics with tape', 'Use blackout curtains or blinds', 'A folded dark t-shirt can work as a temporary eye cover'],
                isFree: false
            },
            whiteNoise: {
                name: 'Sound Masking',
                category: 'Sound Therapy',
                icon: 'sound',
                color: '#6366f1',
                description: 'Consistent sound that masks disruptive noises in your environment',
                howItWorks: 'White noise and similar sounds work by masking sudden changes in sound that can wake you. Your brain focuses on the consistent sound instead of intermittent noises like traffic, neighbors, or snoring partners.',
                bestFor: ['staying-asleep', 'falling-asleep', 'poor-quality'],
                evidence: 'A study in Sleep Medicine Reviews found that white noise significantly improved sleep quality in hospital patients. Research shows it can reduce the time to fall asleep by 38% in noisy environments.',
                howToUse: ['Place the sound source 3-6 feet from your bed', 'Set volume to mask external noises without being too loud', 'Use consistently to build association with sleep', 'Experiment with different sounds (white, pink, brown noise)'],
                diyTips: ['A simple fan provides natural white noise for free', 'Free white noise apps can work well (but screen light is a problem)', 'YouTube has 10-hour sleep sound videos', 'Close windows and use draft stoppers to reduce outside noise first'],
                isFree: false
            },
            ltheanine: {
                name: 'L-Theanine',
                category: 'Supplement (Not Sold by Spacire)',
                icon: 'supplement',
                color: '#14b8a6',
                description: 'An amino acid from tea that promotes calm without drowsiness',
                howItWorks: 'L-theanine increases alpha brain waves (associated with calm alertness) and boosts GABA, serotonin, and dopamine. Unlike other sleep aids, it promotes relaxation without sedation - you feel calm but not drowsy.',
                bestFor: ['anxiety', 'racing-thoughts', 'falling-asleep'],
                evidence: 'Research shows L-theanine improves sleep quality not by sedation but by reducing anxiety. A study in the Journal of Clinical Psychiatry found it improved sleep in boys with ADHD.',
                howToUse: ['Typical dose is 100-400mg before bed', 'Can be taken during the day for calm focus too', 'Often combined with magnesium for enhanced effect', 'Very safe with no known side effects at normal doses'],
                diyTips: ['Green tea contains L-theanine (but also caffeine, so not ideal for evening)', 'Decaffeinated green tea still has some L-theanine', 'L-theanine supplements are widely available and affordable', 'Try it during stressful days as well as before bed'],
                isFree: false,
                notSold: true,
                buyingTip: 'Available at most pharmacies and health food stores. Look for "Suntheanine" brand which is well-researched.'
            }
        };
        
        // ========================================
        // QUIZ NAVIGATION
        // ========================================
        function toggleMobileMenu() {
            document.getElementById('mobileNav').classList.toggle('active');
        }
        
        function selectOption(question, value) {
            userData[question === 1 ? 'primaryChallenge' : 'goal'] = value;
            
            document.querySelectorAll(`#q${question} .option-card`).forEach(card => {
                card.classList.remove('selected');
            });
            event.currentTarget.classList.add('selected');
            
            document.getElementById(`nextBtn${question}`).disabled = false;
        }
        
        // FIXED: Checkbox toggle function
        function toggleCheckbox(event, element, question) {
            // Prevent any default behavior
            event.preventDefault();
            event.stopPropagation();
            
            const input = element.querySelector('input');
            const isCurrentlySelected = element.classList.contains('selected');
            
            // Toggle the current element
            if (isCurrentlySelected) {
                element.classList.remove('selected');
                input.checked = false;
            } else {
                element.classList.add('selected');
                input.checked = true;
            }
            
            // Handle "None" option for symptoms (Q2)
            if (question === 2) {
                if (input.value === 'none' && input.checked) {
                    // Deselect all others when "None" is selected
                    document.querySelectorAll('#q2 .option-card').forEach(card => {
                        if (card !== element) {
                            card.classList.remove('selected');
                            card.querySelector('input').checked = false;
                        }
                    });
                } else if (input.value !== 'none' && input.checked) {
                    // Deselect "None" when any other option is selected
                    const noneCard = document.querySelector('#q2 input[value="none"]').closest('.option-card');
                    noneCard.classList.remove('selected');
                    noneCard.querySelector('input').checked = false;
                }
            }
            
            // Handle "Nothing" option for tried before (Q3)
            if (question === 3) {
                if (input.value === 'nothing' && input.checked) {
                    document.querySelectorAll('#q3 .option-card').forEach(card => {
                        if (card !== element) {
                            card.classList.remove('selected');
                            card.querySelector('input').checked = false;
                        }
                    });
                } else if (input.value !== 'nothing' && input.checked) {
                    const nothingCard = document.querySelector('#q3 input[value="nothing"]').closest('.option-card');
                    nothingCard.classList.remove('selected');
                    nothingCard.querySelector('input').checked = false;
                }
            }
        }
        
        function nextQuestion(current) {
            // Save checkbox data
            if (current === 2) {
                userData.symptoms = Array.from(document.querySelectorAll('#q2 input:checked')).map(i => i.value);
            } else if (current === 3) {
                userData.triedBefore = Array.from(document.querySelectorAll('#q3 input:checked')).map(i => i.value);
            } else if (current === 4) {
                userData.preferences = Array.from(document.querySelectorAll('#q4 input:checked')).map(i => i.value);
            }
            
            document.getElementById(`q${current}`).classList.remove('active');
            document.getElementById(`q${current + 1}`).classList.add('active');
            
            document.getElementById(`step${current}`).classList.remove('active');
            document.getElementById(`step${current}`).classList.add('completed');
            document.getElementById(`step${current + 1}`).classList.add('active');
            
            document.getElementById('progressFill').style.width = `${(current + 1) * 20}%`;
        }
        
        function prevQuestion(current) {
            document.getElementById(`q${current}`).classList.remove('active');
            document.getElementById(`q${current - 1}`).classList.add('active');
            
            document.getElementById(`step${current}`).classList.remove('active');
            document.getElementById(`step${current - 1}`).classList.remove('completed');
            document.getElementById(`step${current - 1}`).classList.add('active');
            
            document.getElementById('progressFill').style.width = `${(current - 1) * 20}%`;
        }
        
        // ========================================
        // RESULTS GENERATION (User-First Approach)
        // ========================================
        function calculateRemedyScores() {
            const scores = {};
            
            Object.keys(REMEDIES).forEach(key => {
                scores[key] = 0;
                const remedy = REMEDIES[key];
                
                // Boost free remedies for budget-conscious users
                if (remedy.isFree) {
                    scores[key] += 10;
                    if (userData.preferences.includes('budget-conscious')) {
                        scores[key] += 25;
                    }
                }
                
                // Score based on primary challenge match
                if (remedy.bestFor.includes(userData.primaryChallenge)) {
                    scores[key] += 30;
                }
                
                // Score based on symptom matches
                userData.symptoms.forEach(symptom => {
                    if (remedy.bestFor.includes(symptom)) {
                        scores[key] += 15;
                    }
                });
                
                // Score based on goal alignment
                if (userData.goal === 'fall-asleep-faster' && remedy.bestFor.includes('falling-asleep')) scores[key] += 20;
                if (userData.goal === 'stay-asleep' && remedy.bestFor.includes('staying-asleep')) scores[key] += 20;
                if (userData.goal === 'deeper-sleep' && remedy.bestFor.includes('poor-quality')) scores[key] += 20;
                if (userData.goal === 'reduce-anxiety' && (remedy.bestFor.includes('anxiety') || remedy.bestFor.includes('racing-thoughts'))) scores[key] += 20;
                
                // Penalize if already tried
                if (userData.triedBefore.includes('aromatherapy') && key === 'lavender') scores[key] -= 15;
                if (userData.triedBefore.includes('herbal-tea') && key === 'chamomile') scores[key] -= 15;
                if (userData.triedBefore.includes('weighted-blanket') && key === 'weightedBlanket') scores[key] -= 15;
                if (userData.triedBefore.includes('sleep-mask') && key === 'sleepMask') scores[key] -= 15;
                if (userData.triedBefore.includes('supplements') && (key === 'magnesium' || key === 'glycine' || key === 'ltheanine')) scores[key] -= 10;
                
                // Preference adjustments
                if (userData.preferences.includes('love-scents') && key === 'lavender') scores[key] += 10;
                if (userData.preferences.includes('scent-sensitive') && key === 'lavender') scores[key] -= 20;
                if (userData.preferences.includes('quick-fix') && remedy.isFree) scores[key] += 10;
            });
            
            return scores;
        }
        
        function generateResults() {
            userData.preferences = Array.from(document.querySelectorAll('#q4 input:checked')).map(i => i.value);
            
            const scores = calculateRemedyScores();
            
            // Sort remedies by score
            const sortedRemedies = Object.entries(scores)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 6);
            
            calculatedResults = {
                topRemedies: sortedRemedies,
                scores: scores
            };
            
            saveResults(calculatedResults);
            
            const resultsHtml = generateResultsHtml(sortedRemedies);
            
            document.getElementById('q5').classList.remove('active');
            document.getElementById('resultsSection').classList.add('active');
            document.getElementById('resultsSection').innerHTML = resultsHtml;
        }
        
        function getRemedyIcon(iconType) {
            const icons = {
                flower: '<svg viewBox="0 0 24 24"><path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2M12 8C15.31 8 18 10.69 18 14C18 16.22 16.79 18.16 15 19.2V22H9V19.2C7.21 18.16 6 16.22 6 14C6 10.69 8.69 8 12 8M12 10C9.79 10 8 11.79 8 14C8 15.74 9.25 17.22 11 17.72V20H13V17.72C14.75 17.22 16 15.74 16 14C16 11.79 14.21 10 12 10Z"/></svg>',
                tea: '<svg viewBox="0 0 24 24"><path d="M2 19V21H20V19H2M20 8V5H18V8H20M20 3C21.1 3 22 3.9 22 5V8C22 9.1 21.1 10 20 10H18V13C18 15.21 16.21 17 14 17H6C3.79 17 2 15.21 2 13V3H20M16 5H4V13C4 14.1 4.9 15 6 15H14C15.1 15 16 14.1 16 13V5Z"/></svg>',
                blanket: '<svg viewBox="0 0 24 24"><path d="M21 16V4H3V16H21M21 2C22.1 2 23 2.9 23 4V16C23 17.1 22.1 18 21 18H14L12 22L10 18H3C1.9 18 1 17.1 1 16V4C1 2.9 1.9 2 3 2H21Z"/></svg>',
                mask: '<svg viewBox="0 0 24 24"><path d="M12 4.5C7 4.5 2.73 7.61 1 12C2.73 16.39 7 19.5 12 19.5S21.27 16.39 23 12C21.27 7.61 17 4.5 12 4.5M12 17C9.24 17 7 14.76 7 12S9.24 7 12 7 17 9.24 17 12 14.76 17 12 17M12 9C10.34 9 9 10.34 9 12S10.34 15 12 15 15 13.66 15 12 13.66 9 12 9Z"/></svg>',
                sound: '<svg viewBox="0 0 24 24"><path d="M14,3.23V5.29C16.89,6.15 19,8.83 19,12C19,15.17 16.89,17.84 14,18.7V20.77C18,19.86 21,16.28 21,12C21,7.72 18,4.14 14,3.23M16.5,12C16.5,10.23 15.5,8.71 14,7.97V16C15.5,15.29 16.5,13.76 16.5,12M3,9V15H7L12,20V4L7,9H3Z"/></svg>',
                supplement: '<svg viewBox="0 0 24 24"><path d="M19.5,6C17.57,6 16,7.57 16,9.5C16,11.43 17.57,13 19.5,13C21.43,13 23,11.43 23,9.5C23,7.57 21.43,6 19.5,6M4.5,6C2.57,6 1,7.57 1,9.5C1,11.43 2.57,13 4.5,13C6.43,13 8,11.43 8,9.5C8,7.57 6.43,6 4.5,6M12,4C8.69,4 6,6.69 6,10V20H18V10C18,6.69 15.31,4 12,4Z"/></svg>',
                breath: '<svg viewBox="0 0 24 24"><path d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4M12,6A6,6 0 0,1 18,12A6,6 0 0,1 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6M12,8A4,4 0 0,0 8,12A4,4 0 0,0 12,16A4,4 0 0,0 16,12A4,4 0 0,0 12,8Z"/></svg>',
                temperature: '<svg viewBox="0 0 24 24"><path d="M15,13V5A3,3 0 0,0 12,2A3,3 0 0,0 9,5V13A5,5 0 0,0 7,17A5,5 0 0,0 12,22A5,5 0 0,0 17,17A5,5 0 0,0 15,13M12,4A1,1 0 0,1 13,5V8H11V5A1,1 0 0,1 12,4Z"/></svg>'
            };
            return icons[iconType] || icons.flower;
        }
        
        function generateResultsHtml(sortedRemedies) {
            const primaryRemedy = REMEDIES[sortedRemedies[0][0]];
            const primaryScore = sortedRemedies[0][1];
            const matchPercentage = Math.min(98, Math.round(50 + (primaryScore / 2)));
            
            let html = `
                <div class="result-header">
                    <div class="result-label">Your Best Match</div>
                    <div class="result-title">${primaryRemedy.name}</div>
                    <div class="result-subtitle">${primaryRemedy.isFree ? 'Free technique' : 'Evidence-based remedy'} - ${matchPercentage}% match</div>
                </div>
                
                <div class="remedy-card">
                    <div class="remedy-header">
                        <div class="remedy-icon" style="background: ${primaryRemedy.color}">
                            ${getRemedyIcon(primaryRemedy.icon)}
                        </div>
                        <div class="remedy-info">
                            <h3>${primaryRemedy.name}</h3>
                            <p>${primaryRemedy.description}</p>
                        </div>
                        ${primaryRemedy.isFree ? '<span class="remedy-match" style="background: #dcfce7; color: #166534;">Free</span>' : ''}
                    </div>
                    <div class="remedy-body">
                        <div class="remedy-section">
                            <div class="remedy-section-title">
                                <svg viewBox="0 0 24 24"><path d="M12,3L1,9L12,15L21,10.09V17H23V9M5,13.18V17.18L12,21L19,17.18V13.18L12,17L5,13.18Z"/></svg>
                                How It Works
                            </div>
                            <p>${primaryRemedy.howItWorks}</p>
                        </div>
                        
                        <div class="remedy-section">
                            <div class="remedy-section-title">
                                <svg viewBox="0 0 24 24"><path d="M9,22A1,1 0 0,1 8,21V18H4A2,2 0 0,1 2,16V4C2,2.89 2.9,2 4,2H20A2,2 0 0,1 22,4V16A2,2 0 0,1 20,18H13.9L10.2,21.71C10,21.9 9.75,22 9.5,22V22H9Z"/></svg>
                                What Research Says
                            </div>
                            <p>${primaryRemedy.evidence}</p>
                        </div>
                        
                        <div class="remedy-section">
                            <div class="remedy-section-title">
                                <svg viewBox="0 0 24 24"><path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M7.07,18.28C7.5,17.38 10.12,16.5 12,16.5C13.88,16.5 16.5,17.38 16.93,18.28C15.57,19.36 13.86,20 12,20C10.14,20 8.43,19.36 7.07,18.28M18.36,16.83C16.93,15.09 13.46,14.5 12,14.5C10.54,14.5 7.07,15.09 5.64,16.83C4.62,15.5 4,13.82 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,13.82 19.38,15.5 18.36,16.83M12,6C10.06,6 8.5,7.56 8.5,9.5C8.5,11.44 10.06,13 12,13C13.94,13 15.5,11.44 15.5,9.5C15.5,7.56 13.94,6 12,6M12,11A1.5,1.5 0 0,1 10.5,9.5A1.5,1.5 0 0,1 12,8A1.5,1.5 0 0,1 13.5,9.5A1.5,1.5 0 0,1 12,11Z"/></svg>
                                How to Use
                            </div>
                            <ul>
                                ${primaryRemedy.howToUse.map(tip => `<li>${tip}</li>`).join('')}
                            </ul>
                        </div>
                        
                        <div class="diy-box">
                            <div class="diy-title">
                                <svg viewBox="0 0 24 24" style="width: 16px; height: 16px; fill: #155724;"><path d="M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,0 20,12A8,8 0 0,0 12,4M11,17V16H9V14H13V13H10A1,1 0 0,1 9,12V9A1,1 0 0,1 10,8H11V7H13V8H15V10H11V11H14A1,1 0 0,1 15,12V15A1,1 0 0,1 14,16H13V17H11Z"/></svg>
                                Free DIY Tips
                            </div>
                            <ul>
                                ${primaryRemedy.diyTips.map(tip => `<li>${tip}</li>`).join('')}
                            </ul>
                        </div>
                        
                        ${primaryRemedy.notSold ? `
                            <div style="background: #fef3c7; border-left: 4px solid #f59e0b; padding: 12px 16px; margin-top: 16px; border-radius: 0 8px 8px 0;">
                                <div style="font-size: 13px; color: #92400e; font-weight: 600; margin-bottom: 4px;">Where to Buy</div>
                                <p style="font-size: 13px; color: #92400e; margin: 0;">${primaryRemedy.buyingTip}</p>
                            </div>
                        ` : ''}
                    </div>
                </div>
            `;
            
            // Add alternative remedies
            if (sortedRemedies.length > 1) {
                html += `
                    <div class="alternatives-section">
                        <h3 class="alternatives-title">Other Remedies Worth Trying</h3>
                        <div class="alt-cards">
                            ${sortedRemedies.slice(1, 5).map(([key, score]) => {
                                const remedy = REMEDIES[key];
                                const altMatch = Math.min(95, Math.round(45 + (score / 2)));
                                return `
                                    <div class="alt-card">
                                        <div class="alt-card-icon" style="background: ${remedy.color}">
                                            ${getRemedyIcon(remedy.icon)}
                                        </div>
                                        <div class="alt-card-title">${remedy.name}</div>
                                        <div class="alt-card-match">${remedy.isFree ? 'Free' : remedy.notSold ? 'Supplement' : altMatch + '% match'}</div>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    </div>
                `;
            }
            
            // Add personalized tips
            html += `<h3 class="section-title" style="margin-top: 32px;">Personalized Tips for Your Situation</h3>`;
            
            const tips = generatePersonalizedTips();
            tips.forEach(tip => {
                html += `
                    <div class="tip-card priority-${tip.priority}">
                        <div class="tip-header">
                            <span class="tip-title">${tip.title}</span>
                            <span class="priority-badge ${tip.priority}">${tip.priority === 'high' ? 'Try First' : tip.priority === 'medium' ? 'Important' : 'Helpful'}</span>
                        </div>
                        <p class="tip-text">${tip.text}</p>
                    </div>
                `;
            });
            
            // Add supplements info section (honest, not selling)
            const hasSupplementRecommendation = sortedRemedies.some(([key]) => REMEDIES[key].notSold);
            if (hasSupplementRecommendation || userData.symptoms.includes('restlessness') || userData.symptoms.includes('pain')) {
                html += `
                    <div class="supplements-note">
                        <div class="supplements-title">
                            <svg viewBox="0 0 24 24" style="width: 18px; height: 18px; fill: #5b21b6;"><path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20M12,6A6,6 0 0,0 6,12A6,6 0 0,0 12,18A6,6 0 0,0 18,12A6,6 0 0,0 12,6M12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16Z"/></svg>
                            About Sleep Supplements
                        </div>
                        <p class="supplements-text">We don't sell supplements, but these evidence-based options may help your specific situation:</p>
                        <ul class="supplements-list">
                            <li><strong>Magnesium glycinate</strong> - Best for muscle tension, restlessness, and staying asleep (200-400mg before bed)</li>
                            <li><strong>L-theanine</strong> - Best for racing thoughts and anxiety without drowsiness (100-200mg)</li>
                            <li><strong>Glycine</strong> - Best for temperature regulation and sleep quality (3g before bed)</li>
                        </ul>
                        <p class="supplements-text" style="margin-bottom: 0; font-size: 12px;">Always check with your doctor before starting supplements, especially if you take medications.</p>
                    </div>
                `;
            }
            
            // Safety notice
            html += `
                <div class="safety-notice">
                    <div class="safety-title">
                        <svg viewBox="0 0 24 24" style="width: 18px; height: 18px; fill: #856404;"><path d="M12,2L1,21H23M12,6L19.53,19H4.47M11,10V14H13V10M11,16V18H13V16"/></svg>
                        Important Health Information
                    </div>
                    <p class="safety-text">Natural remedies can help mild to moderate sleep difficulties but are not substitutes for medical treatment. If you have persistent insomnia lasting more than 3 weeks, sleep apnea symptoms, or other sleep disorders, please consult a healthcare provider. Some supplements may interact with medications.</p>
                </div>
            `;
            
            // Optional product mention (very subtle, user-focused)
            const showProducts = userData.preferences.includes('willing-invest') && !userData.preferences.includes('budget-conscious');
            if (showProducts) {
                html += `
                    <div class="product-note">
                        <div class="product-note-title">Looking for sleep products?</div>
                        <p class="product-note-text">If you decide you'd like to try aromatherapy sprays, weighted blankets, sleep masks, or white noise machines, we have a selection in our store. No pressure - the free techniques above work great on their own.</p>
                        <a href="https://spacire.com/collections/sleep-aids-for-better-rest" class="product-link-subtle" target="_blank">Browse sleep products (optional) &rarr;</a>
                    </div>
                `;
            }
            
            // Email capture
            html += `
                <div class="email-capture">
                    <h3 class="email-capture-title">Save Your Personalized Results</h3>
                    <p class="email-capture-text">Get your complete remedy guide with all recommendations, DIY tips, and implementation timeline sent to your inbox.</p>
                    <form class="email-form" onsubmit="sendReport(event)">
                        <input type="text" class="email-input" id="userName" placeholder="First name" required>
                        <input type="email" class="email-input" id="userEmail" placeholder="Email address" required>
                        <button type="submit" class="btn btn-primary" id="sendReportBtn">Send My Guide</button>
                    </form>
                    <p class="email-success" id="emailSuccess">Guide sent! Check your inbox.</p>
                    <p class="form-error" id="formError"></p>
                </div>
            `;
            
            return html;
        }
        
        function generatePersonalizedTips() {
            const tips = [];
            
            if (userData.primaryChallenge === 'falling-asleep') {
                tips.push({
                    title: 'Create a Wind-Down Buffer',
                    priority: 'high',
                    text: 'Stop stimulating activities 60-90 minutes before bed. Dim lights, put away screens, and do calming activities. This signals to your brain that sleep is approaching - its one of the most impactful changes you can make.'
                });
            }
            
            if (userData.primaryChallenge === 'staying-asleep') {
                tips.push({
                    title: 'Limit Fluids Before Bed',
                    priority: 'medium',
                    text: 'Stop drinking 2-3 hours before bed to reduce nighttime bathroom trips. If you must drink, take small sips only. Also consider if alcohol is disrupting your sleep - even small amounts can cause middle-of-the-night waking.'
                });
            }
            
            if (userData.symptoms.includes('racing-thoughts')) {
                tips.push({
                    title: 'Try a "Brain Dump" Before Bed',
                    priority: 'high',
                    text: 'Keep a notepad by your bed. Spend 5 minutes writing down worries, to-dos, or thoughts before trying to sleep. Research shows this simple technique reduces sleep onset time by up to 9 minutes because your brain knows the information is "saved."'
                });
            }
            
            if (userData.symptoms.includes('anxiety')) {
                tips.push({
                    title: 'Progressive Muscle Relaxation',
                    priority: 'high',
                    text: 'Lie in bed and systematically tense then release each muscle group, starting from your toes and working up to your face. Hold tension for 5 seconds, release for 10. This physical release helps calm an anxious mind.'
                });
            }
            
            if (userData.symptoms.includes('temperature')) {
                tips.push({
                    title: 'Take a Warm Shower Before Bed',
                    priority: 'medium',
                    text: 'Counterintuitively, a warm shower 1-2 hours before bed helps you cool down faster. The warm water dilates blood vessels, and when you get out, heat rapidly leaves your body, triggering sleepiness.'
                });
            }
            
            if (userData.symptoms.includes('restlessness')) {
                tips.push({
                    title: 'Avoid Screens for 1 Hour Before Bed',
                    priority: 'medium',
                    text: 'Blue light from phones and computers suppresses melatonin. But beyond light, the content itself is stimulating - social media, news, and messages keep your brain active. Try reading a physical book instead.'
                });
            }
            
            // Always include sleep consistency
            if (tips.length < 3) {
                tips.push({
                    title: 'Keep a Consistent Wake Time',
                    priority: 'low',
                    text: 'Your wake time is more important than your bedtime. Waking at the same time daily (even weekends) anchors your circadian rhythm. Allow flexibility on bedtime based on sleepiness, but protect your wake time.'
                });
            }
            
            return tips.slice(0, 4);
        }
        
        // ========================================
        // DATABASE & EMAIL
        // ========================================
        async function saveResults(results) {
            try {
                const data = {
                    tool_name: 'natural_sleep_remedy_finder',
                    results_json: JSON.stringify({
                        userData: userData,
                        topRemedies: results.topRemedies.map(([key, score]) => ({
                            remedy: key,
                            score: score,
                            name: REMEDIES[key].name
                        }))
                    }),
                    user_agent: navigator.userAgent.substring(0, 500),
                    created_at: new Date().toISOString()
                };
                
                await databases.createDocument(
                    CONFIG.databaseId,
                    CONFIG.tableId,
                    'unique()',
                    data
                );
                console.log('Results saved to database');
            } catch (error) {
                console.error('Database error (non-critical):', error);
            }
        }
        
        async function sendReport(event) {
            event.preventDefault();
            
            const email = document.getElementById('userEmail').value.trim();
            const firstName = document.getElementById('userName').value.trim();
            const sendBtn = document.getElementById('sendReportBtn');
            const errorEl = document.getElementById('formError');
            
            if (!email || !firstName) {
                errorEl.textContent = 'Please enter your name and email.';
                errorEl.style.display = 'block';
                return;
            }
            
            sendBtn.disabled = true;
            sendBtn.textContent = 'Sending...';
            errorEl.style.display = 'none';
            
            const primaryRemedy = REMEDIES[calculatedResults.topRemedies[0][0]];
            const matchPercentage = Math.min(98, Math.round(50 + (calculatedResults.topRemedies[0][1] / 2)));
            
            const emailPayload = JSON.stringify({
                toolName: 'natural-sleep-remedy-finder',
                email: email,
                firstName: firstName,
                heroTitle: `Your Natural Sleep Remedy Guide`,
                heroSubtitle: `Personalized recommendations from Spacire`,
                introText: `Hi {firstName}, based on your sleep profile, we've identified the best natural remedies to help you sleep better. Your top match is ${primaryRemedy.name}${primaryRemedy.isFree ? ' - a free technique you can start using tonight' : ''}.`,
                sections: [
                    {
                        type: 'summary',
                        title: 'Your Top Remedy',
                        items: [
                            { label: 'Primary Remedy', value: primaryRemedy.name, highlight: true },
                            { label: 'Category', value: primaryRemedy.category },
                            { label: 'Cost', value: primaryRemedy.isFree ? 'Free' : (primaryRemedy.notSold ? 'Purchase separately' : 'Low cost') },
                            { label: 'Main Challenge', value: userData.primaryChallenge.replace(/-/g, ' ').replace(/\b\w/g, l => l.toUpperCase()) }
                        ]
                    },
                    {
                        type: 'tips',
                        title: 'How to Get Started',
                        items: [
                            {
                                title: primaryRemedy.name,
                                priority: 'high',
                                text: primaryRemedy.howItWorks,
                                diyTips: primaryRemedy.diyTips
                            },
                            ...generatePersonalizedTips().slice(0, 2).map(tip => ({
                                title: tip.title,
                                priority: tip.priority,
                                text: tip.text
                            }))
                        ]
                    },
                    {
                        type: 'warning',
                        title: 'Important Note',
                        text: 'Natural remedies work best as part of good sleep hygiene. Give each remedy 2-3 weeks of consistent use before judging effectiveness. If sleep problems persist, please consult a healthcare provider.'
                    }
                ],
                ctaButton: {
                    text: 'Explore More Sleep Tools',
                    url: 'https://tools.spacire.com'
                }
            });
            
            try {
                try {
                    await databases.createDocument(
                        CONFIG.databaseId,
                        CONFIG.tableId,
                        'unique()',
                        {
                            tool_name: 'natural_sleep_remedy_finder',
                            user_email: email,
                            user_first_name: firstName,
                            results_json: JSON.stringify({
                                userData: userData,
                                topRemedies: calculatedResults.topRemedies,
                                emailSent: true
                            }),
                            user_agent: navigator.userAgent.substring(0, 500),
                            created_at: new Date().toISOString()
                        }
                    );
                } catch (dbError) {
                    console.error('Database error (non-critical):', dbError);
                }
                
                const response = await functions.createExecution(
                    CONFIG.functionId,
                    emailPayload,
                    true
                );
                
                document.getElementById('emailSuccess').style.display = 'block';
                document.getElementById('userEmail').disabled = true;
                document.getElementById('userName').disabled = true;
                sendBtn.style.display = 'none';
                
            } catch (error) {
                console.error('Email error:', error);
                errorEl.textContent = 'Failed to send. Please try again.';
                errorEl.style.display = 'block';
                sendBtn.disabled = false;
                sendBtn.textContent = 'Send My Guide';
            }
        }
        
        // ========================================
        // UTILITY FUNCTIONS
        // ========================================
        function toggleInfo(header) {
            const toggle = header.closest('.info-toggle');
            const content = toggle.querySelector('.info-content');
            toggle.classList.toggle('open');
            content.classList.toggle('open');
        }
        
        function copyLink() {
            navigator.clipboard.writeText('https://tools.spacire.com/natural-sleep-remedy-finder').then(() => {
                const btn = event.target.closest('.share-btn');
                const originalText = btn.innerHTML;
                btn.innerHTML = '<svg viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"/></svg> Copied!';
                setTimeout(() => { btn.innerHTML = originalText; }, 2000);
            });
        }
    </script>
</body>
</html>
