<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Free Shift Worker Sleep Planner - Get personalized sleep schedules for night shifts, rotating shifts, and irregular hours. Science-backed tips for nurses, factory workers, and security personnel.">
    <meta name="keywords" content="shift worker sleep schedule, night shift sleep tips, rotating shift sleep plan, circadian rhythm adjustment, daytime sleeping tips, nurse sleep schedule, factory worker sleep">
    <meta name="author" content="Spacire">
    <meta name="robots" content="index, follow">
    
    <title>Shift Worker Sleep Planner - Free Personalized Schedule Tool | Spacire</title>
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://tools.spacire.com/shift-worker-sleep-planner">
    
    <!-- Open Graph -->
    <meta property="og:title" content="Shift Worker Sleep Planner - Free Personalized Schedule">
    <meta property="og:description" content="Get a personalized sleep schedule optimized for your shift pattern. Free tool for nurses, factory workers, and anyone working non-traditional hours.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://tools.spacire.com/shift-worker-sleep-planner">
    <meta property="og:site_name" content="Spacire Sleep Tools">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Shift Worker Sleep Planner - Free Personalized Schedule">
    <meta name="twitter:description" content="Get a personalized sleep schedule optimized for your shift pattern.">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="images/favicon.png">
    
    <!-- Google Fonts - Domine (same as Tool 1) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Domine:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Schema.org Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Shift Worker Sleep Planner",
        "description": "Free tool to create personalized sleep schedules for shift workers. Optimized for night shifts, rotating shifts, and irregular hours.",
        "url": "https://tools.spacire.com/shift-worker-sleep-planner",
        "applicationCategory": "HealthApplication",
        "operatingSystem": "Web Browser",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "GBP"
        },
        "publisher": {
            "@type": "Organization",
            "name": "Spacire",
            "url": "https://spacire.com"
        }
    }
    </script>
    
    <!-- FAQ Schema -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
            {
                "@type": "Question",
                "name": "How much sleep do shift workers need?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Shift workers need the same 7-9 hours of sleep as day workers, but achieving quality sleep during daytime hours requires specific strategies like blackout curtains, white noise, and consistent sleep schedules."
                }
            },
            {
                "@type": "Question",
                "name": "When should night shift workers sleep?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Night shift workers typically benefit from sleeping immediately after their shift ends, before the body's circadian alerting signal increases. For a shift ending at 7am, sleeping from 8am-4pm is often optimal."
                }
            },
            {
                "@type": "Question",
                "name": "How can I adjust to rotating shifts?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Gradual adjustment is key. Shift your sleep schedule by 1-2 hours per day in the direction of your upcoming shift. Use bright light exposure strategically and avoid caffeine close to your planned sleep time."
                }
            }
        ]
    }
    </script>
    
    <!-- BreadcrumbList Schema -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
            {
                "@type": "ListItem",
                "position": 1,
                "name": "Spacire",
                "item": "https://spacire.com"
            },
            {
                "@type": "ListItem",
                "position": 2,
                "name": "Sleep Tools",
                "item": "https://tools.spacire.com"
            },
            {
                "@type": "ListItem",
                "position": 3,
                "name": "Shift Worker Sleep Planner",
                "item": "https://tools.spacire.com/shift-worker-sleep-planner"
            }
        ]
    }
    </script>

    <style>
        /* ========================================
           CSS VARIABLES & RESET (same as Tool 1)
           ======================================== */
        :root {
            --primary: #042548;
            --primary-light: #0a3a6b;
            --accent: #E0B252;
            --accent-light: #f5d98a;
            --background: #FFFFFF;
            --text-primary: #232323;
            --text-secondary: #323232;
            --text-light: #969696;
            --border: #E6E6E6;
            --hover: #F8F8F8;
            --success: #DFF0D8;
            --success-dark: #3c763d;
            --warning: #FCF8E3;
            --warning-dark: #8a6d3b;
            --error: #D93333;
            --error-light: #F2DEDE;
            --info-bg: #e6f4ff;
            
            --font-primary: 'Domine', Georgia, serif;
            --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
            --shadow-md: 0 4px 6px rgba(0,0,0,0.07);
            --shadow-lg: 0 10px 25px rgba(0,0,0,0.1);
            --radius-sm: 4px;
            --radius-md: 8px;
            --radius-lg: 12px;
            --transition: all 0.3s ease;
        }
        
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        html {
            scroll-behavior: smooth;
        }
        
        body {
            font-family: var(--font-primary);
            font-size: 16px;
            line-height: 1.6;
            color: var(--text-primary);
            background: var(--background);
            -webkit-font-smoothing: antialiased;
        }
        
        /* ========================================
           HEADER (identical to Tool 1)
           ======================================== */
        .site-header {
            background: var(--primary);
            padding: 12px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .logo-link {
            display: flex;
            align-items: center;
            text-decoration: none;
            gap: 12px;
        }
        
        .logo-text {
            color: #fff;
            font-size: 20px;
            font-weight: 600;
            letter-spacing: 0.05em;
        }
        
        .header-nav {
            display: flex;
            gap: 24px;
        }
        
        .header-nav a {
            color: rgba(255,255,255,0.85);
            text-decoration: none;
            font-size: 14px;
            letter-spacing: 0.02em;
            transition: var(--transition);
        }
        
        .header-nav a:hover {
            color: var(--accent);
        }
        
        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            cursor: pointer;
            padding: 8px;
            flex-direction: column;
            gap: 5px;
        }
        
        .mobile-menu-btn span {
            display: block;
            width: 24px;
            height: 2px;
            background: #fff;
            transition: var(--transition);
        }
        
        .mobile-nav {
            display: none;
            background: var(--primary);
            padding: 16px 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
        }
        
        .mobile-nav.active {
            display: block;
        }
        
        .mobile-nav a {
            display: block;
            color: rgba(255,255,255,0.85);
            text-decoration: none;
            padding: 12px 0;
            font-size: 14px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .mobile-nav a:last-child {
            border-bottom: none;
        }
        
        .mobile-nav a:hover {
            color: var(--accent);
        }
        
        @media (max-width: 768px) {
            .header-nav {
                display: none;
            }
            
            .mobile-menu-btn {
                display: flex;
            }
        }
        
        /* ========================================
           BREADCRUMB (identical to Tool 1)
           ======================================== */
        .breadcrumb {
            background: var(--hover);
            padding: 12px 0;
            border-bottom: 1px solid var(--border);
        }
        
        .breadcrumb-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            font-size: 13px;
        }
        
        .breadcrumb a {
            color: var(--primary);
            text-decoration: none;
        }
        
        .breadcrumb a:hover {
            text-decoration: underline;
        }
        
        .breadcrumb span {
            color: var(--text-light);
            margin: 0 8px;
        }
        
        /* ========================================
           MAIN CONTAINER
           ======================================== */
        .main-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 40px 20px 60px;
        }
        
        /* ========================================
           PAGE TITLE (identical to Tool 1)
           ======================================== */
        .page-title {
            text-align: center;
            margin-bottom: 32px;
        }
        
        .page-title h1 {
            font-size: 28px;
            font-weight: 700;
            color: var(--primary);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 12px;
        }
        
        .page-subtitle {
            font-size: 16px;
            color: var(--text-secondary);
            max-width: 600px;
            margin: 0 auto;
        }
        
        /* ========================================
           TOOL CARD (consistent with Tool 1)
           ======================================== */
        .tool-card {
            background: #fff;
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-md);
        }
        
        .tool-header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: #fff;
            padding: 24px 28px;
        }
        
        .tool-header h2 {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 4px;
        }
        
        .tool-header p {
            font-size: 14px;
            opacity: 0.9;
        }
        
        .tool-body {
            padding: 28px;
        }
        
        /* ========================================
           PROGRESS (styled like Tool 1)
           ======================================== */
        .progress-container {
            margin-bottom: 28px;
        }
        
        .progress-steps {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
        }
        
        .progress-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            flex: 1;
            position: relative;
        }
        
        .step-number {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--border);
            color: var(--text-light);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 6px;
            transition: var(--transition);
            position: relative;
            z-index: 2;
        }
        
        .progress-step.active .step-number {
            background: var(--primary);
            color: #fff;
        }
        
        .progress-step.completed .step-number {
            background: var(--success-dark);
            color: #fff;
        }
        
        .step-label {
            font-size: 11px;
            color: var(--text-light);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .progress-step.active .step-label,
        .progress-step.completed .step-label {
            color: var(--text-primary);
        }
        
        .progress-bar-bg {
            height: 4px;
            background: var(--border);
            border-radius: 2px;
            overflow: hidden;
        }
        
        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary) 0%, var(--accent) 100%);
            border-radius: 2px;
            transition: width 0.5s ease;
        }
        
        @media (max-width: 600px) {
            .step-label {
                display: none;
            }
        }
        
        /* ========================================
           QUESTION SECTIONS
           ======================================== */
        .question-section {
            display: none;
        }
        
        .question-section.active {
            display: block;
            animation: fadeIn 0.4s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .question-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 6px;
        }
        
        .question-description {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }
        
        /* ========================================
           OPTION CARDS
           ======================================== */
        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 12px;
            margin-bottom: 24px;
        }
        
        .option-card {
            border: 2px solid var(--border);
            border-radius: var(--radius-md);
            padding: 16px;
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            background: #fff;
        }
        
        .option-card:hover {
            border-color: var(--primary);
            background: var(--hover);
        }
        
        .option-card.selected {
            border-color: var(--primary);
            background: var(--info-bg);
        }
        
        .option-card input {
            display: none;
        }
        
        .option-icon {
            font-size: 28px;
            margin-bottom: 8px;
        }
        
        .option-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }
        
        .option-desc {
            font-size: 12px;
            color: var(--text-light);
        }
        
        /* Time inputs */
        .time-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-bottom: 20px;
        }
        
        .time-group {
            display: flex;
            flex-direction: column;
        }
        
        .time-group label {
            font-size: 13px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 6px;
        }
        
        .time-group input {
            padding: 12px;
            border: 2px solid var(--border);
            border-radius: var(--radius-md);
            font-family: var(--font-primary);
            font-size: 16px;
            transition: var(--transition);
        }
        
        .time-group input:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        /* Slider */
        .slider-container {
            margin-bottom: 20px;
        }
        
        .slider-label {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: var(--text-light);
            margin-bottom: 8px;
        }
        
        input[type="range"] {
            -webkit-appearance: none;
            width: 100%;
            height: 6px;
            background: linear-gradient(90deg, var(--primary) 0%, var(--primary) 45%, var(--border) 45%);
            border-radius: 3px;
            outline: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: var(--primary);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: var(--shadow-md);
        }
        
        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: var(--primary);
            border-radius: 50%;
            cursor: pointer;
            border: none;
        }
        
        .slider-value {
            text-align: center;
            font-size: 14px;
            font-weight: 600;
            color: var(--primary);
            margin-top: 8px;
        }
        
        /* Checkbox options */
        .checkbox-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-bottom: 24px;
        }
        
        .checkbox-option {
            display: flex;
            align-items: center;
            padding: 12px 14px;
            border: 2px solid var(--border);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: var(--transition);
        }
        
        .checkbox-option:hover {
            border-color: var(--primary);
        }
        
        .checkbox-option.selected {
            border-color: var(--primary);
            background: var(--info-bg);
        }
        
        .checkbox-option input {
            display: none;
        }
        
        .checkbox-option span {
            font-size: 14px;
            color: var(--text-primary);
        }
        
        .checkbox-icon {
            margin-right: 10px;
            font-size: 18px;
        }
        
        /* ========================================
           NAVIGATION BUTTONS
           ======================================== */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            gap: 16px;
            margin-top: 28px;
            padding-top: 20px;
            border-top: 1px solid var(--border);
        }
        
        .btn {
            padding: 14px 28px;
            border-radius: var(--radius-md);
            font-family: var(--font-primary);
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            cursor: pointer;
            transition: var(--transition);
            border: none;
        }
        
        .btn-primary {
            background: var(--primary);
            color: #fff;
        }
        
        .btn-primary:hover {
            background: var(--primary-light);
        }
        
        .btn-primary:disabled {
            background: var(--text-light);
            cursor: not-allowed;
        }
        
        .btn-secondary {
            background: var(--hover);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }
        
        .btn-secondary:hover {
            background: var(--border);
        }
        
        /* ========================================
           RESULTS SECTION
           ======================================== */
        .results-section {
            display: none;
        }
        
        .results-section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        .score-display {
            text-align: center;
            padding: 32px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            border-radius: var(--radius-lg);
            color: #fff;
            margin-bottom: 28px;
        }
        
        .score-label {
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            opacity: 0.9;
            margin-bottom: 8px;
        }
        
        .score-value {
            font-size: 48px;
            font-weight: 700;
            margin-bottom: 8px;
        }
        
        .score-subtitle {
            font-size: 16px;
            opacity: 0.9;
        }
        
        /* Schedule Display */
        .schedule-card {
            background: var(--info-bg);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            padding: 24px;
            margin-bottom: 24px;
        }
        
        .schedule-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 16px;
        }
        
        .schedule-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px;
        }
        
        .schedule-item {
            background: #fff;
            border-radius: var(--radius-md);
            padding: 14px;
            text-align: center;
        }
        
        .schedule-time {
            font-size: 20px;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 4px;
        }
        
        .schedule-activity {
            font-size: 13px;
            color: var(--text-secondary);
        }
        
        /* Recommendation Cards */
        .recommendations-section {
            margin-bottom: 28px;
        }
        
        .section-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 16px;
        }
        
        .recommendation-card {
            background: #fff;
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            padding: 20px;
            margin-bottom: 16px;
        }
        
        .recommendation-card.priority-high {
            border-left: 4px solid var(--error);
        }
        
        .recommendation-card.priority-medium {
            border-left: 4px solid var(--accent);
        }
        
        .recommendation-card.priority-low {
            border-left: 4px solid #5cb85c;
        }
        
        .recommendation-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 10px;
        }
        
        .recommendation-title {
            font-size: 15px;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .priority-badge {
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
            padding: 4px 8px;
            border-radius: 4px;
        }
        
        .priority-badge.high {
            background: var(--error-light);
            color: var(--error);
        }
        
        .priority-badge.medium {
            background: var(--warning);
            color: var(--warning-dark);
        }
        
        .priority-badge.low {
            background: var(--success);
            color: var(--success-dark);
        }
        
        .recommendation-text {
            font-size: 14px;
            color: var(--text-secondary);
            line-height: 1.6;
        }
        
        /* DIY Tips */
        .diy-tips {
            background: var(--info-bg);
            border-radius: var(--radius-md);
            padding: 20px;
            margin-top: 12px;
        }
        
        .diy-tips-title {
            font-size: 13px;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 8px;
        }
        
        .diy-tips ul {
            margin: 0;
            padding-left: 18px;
        }
        
        .diy-tips li {
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }
        
        /* Product Cards */
        .product-recommendation {
            display: flex;
            gap: 16px;
            background: var(--hover);
            border-radius: var(--radius-md);
            padding: 16px;
            margin-top: 16px;
            align-items: center;
        }
        
        .product-image {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: var(--radius-sm);
            border: 1px solid var(--border);
        }
        
        .product-info {
            flex: 1;
        }
        
        .product-name {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }
        
        .product-price {
            font-size: 16px;
            font-weight: 700;
            color: var(--primary);
        }
        
        .product-link {
            display: inline-block;
            padding: 10px 16px;
            background: var(--primary);
            color: #fff;
            text-decoration: none;
            border-radius: var(--radius-sm);
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            transition: var(--transition);
        }
        
        .product-link:hover {
            background: var(--primary-light);
        }
        
        @media (max-width: 500px) {
            .product-recommendation {
                flex-direction: column;
                text-align: center;
            }
        }
        
        /* Email Capture */
        .email-capture {
            background: linear-gradient(135deg, #f8f9fa 0%, var(--info-bg) 100%);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            padding: 28px;
            text-align: center;
            margin-top: 28px;
        }
        
        .email-capture-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 8px;
        }
        
        .email-capture-text {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }
        
        .email-form {
            display: flex;
            gap: 12px;
            max-width: 450px;
            margin: 0 auto;
        }
        
        .email-input {
            flex: 1;
            padding: 14px 16px;
            border: 2px solid var(--border);
            border-radius: var(--radius-md);
            font-family: var(--font-primary);
            font-size: 14px;
            transition: var(--transition);
        }
        
        .email-input:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .email-success {
            display: none;
            color: var(--success-dark);
            font-weight: 600;
            margin-top: 12px;
        }
        
        @media (max-width: 500px) {
            .email-form {
                flex-direction: column;
            }
        }
        
        /* ========================================
           INFO TOGGLES (SEO content)
           ======================================== */
        .info-section {
            margin-top: 40px;
        }
        
        .info-toggle {
            background: #fff;
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            margin-bottom: 12px;
            overflow: hidden;
        }
        
        .toggle-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 18px 24px;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .toggle-header:hover {
            background: var(--hover);
        }
        
        .toggle-title {
            font-size: 15px;
            font-weight: 600;
            color: var(--primary);
        }
        
        .toggle-icon {
            font-size: 20px;
            color: var(--primary);
            transition: transform 0.3s ease;
        }
        
        .info-toggle.open .toggle-icon {
            transform: rotate(180deg);
        }
        
        .info-content {
            display: none;
            padding: 24px;
            background: #fff;
            border-top: 1px solid var(--border);
        }
        
        .info-content.open {
            display: block;
            animation: slideDown 0.3s ease;
        }
        
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .info-content h4 {
            font-size: 15px;
            font-weight: 600;
            color: var(--primary);
            margin: 20px 0 10px;
        }
        
        .info-content h4:first-child {
            margin-top: 0;
        }
        
        .info-content p {
            font-size: 14px;
            color: var(--text-secondary);
            line-height: 1.7;
            margin-bottom: 12px;
        }
        
        .info-content ul {
            margin: 0 0 16px 0;
            padding-left: 20px;
        }
        
        .info-content li {
            font-size: 14px;
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: 6px;
        }
        
        .info-table {
            width: 100%;
            border-collapse: collapse;
            margin: 16px 0;
            font-size: 14px;
        }
        
        .info-table th,
        .info-table td {
            padding: 12px;
            text-align: left;
            border: 1px solid var(--border);
        }
        
        .info-table th {
            background: var(--hover);
            font-weight: 600;
            color: var(--primary);
        }
        
        .info-table td {
            color: var(--text-secondary);
        }
        
        /* ========================================
           FOOTER (identical to Tool 1)
           ======================================== */
        .site-footer {
            background: var(--primary);
            color: #fff;
            padding: 48px 0 24px;
            margin-top: 60px;
        }
        
        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .footer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }
        
        .footer-section h4 {
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 16px;
            color: var(--accent);
        }
        
        .footer-section a {
            display: block;
            color: rgba(255,255,255,0.8);
            text-decoration: none;
            font-size: 14px;
            margin-bottom: 10px;
            transition: var(--transition);
        }
        
        .footer-section a:hover {
            color: var(--accent);
        }
        
        .footer-bottom {
            padding-top: 24px;
            border-top: 1px solid rgba(255,255,255,0.1);
            text-align: center;
            font-size: 12px;
            color: rgba(255,255,255,0.6);
        }
        
        .footer-legal {
            margin-top: 12px;
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .footer-legal a {
            color: rgba(255,255,255,0.6);
            text-decoration: none;
        }
        
        .footer-legal a:hover {
            color: var(--accent);
        }
        
        @media (max-width: 768px) {
            .footer-grid {
                grid-template-columns: 1fr 1fr;
                gap: 24px;
            }
        }
        
        @media (max-width: 480px) {
            .footer-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <!-- Header (identical to Tool 1) -->
    <header class="site-header">
        <div class="header-content">
            <a href="https://tools.spacire.com" class="logo-link">
                <span class="logo-text">Spacire</span>
            </a>
            <nav class="header-nav">
                <a href="https://tools.spacire.com">All Tools</a>
                <a href="https://spacire.com/collections/sleep-aids-for-shift-workers">Sleep Products</a>
                <a href="https://spacire.com/blogs/journal">Sleep Journal</a>
                <a href="https://spacire.com">Shop</a>
            </nav>
            <button class="mobile-menu-btn" aria-label="Toggle menu" onclick="toggleMobileMenu()">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
        <nav class="mobile-nav" id="mobileNav">
            <a href="https://tools.spacire.com">All Tools</a>
            <a href="https://spacire.com/collections/sleep-aids-for-shift-workers">Sleep Products</a>
            <a href="https://spacire.com/blogs/journal">Sleep Journal</a>
            <a href="https://spacire.com">Shop</a>
        </nav>
    </header>
    
    <!-- Breadcrumb (like Tool 1) -->
    <nav class="breadcrumb" aria-label="Breadcrumb">
        <div class="breadcrumb-content">
            <a href="https://spacire.com">Spacire</a>
            <span>›</span>
            <a href="https://tools.spacire.com">Sleep Tools</a>
            <span>›</span>
            <span style="color: var(--text-primary);">Shift Worker Sleep Planner</span>
        </div>
    </nav>
    
    <!-- Main Content -->
    <main class="main-container">
        <!-- Page Title -->
        <header class="page-title">
            <h1>Shift Worker Sleep Planner</h1>
            <p class="page-subtitle">Get a personalized sleep schedule optimized for your shift pattern. Free tool designed for nurses, factory workers, and anyone working non-traditional hours. Takes about 3 minutes.</p>
        </header>
        
        <!-- Tool Card -->
        <div class="tool-card">
            <div class="tool-header">
                <h2>Create Your Sleep Schedule</h2>
                <p>Answer a few questions about your work pattern and lifestyle</p>
            </div>
            
            <div class="tool-body">
                <!-- Progress -->
                <div class="progress-container">
                    <div class="progress-steps">
                        <div class="progress-step active" data-step="1">
                            <div class="step-number">1</div>
                            <span class="step-label">Shift Type</span>
                        </div>
                        <div class="progress-step" data-step="2">
                            <div class="step-number">2</div>
                            <span class="step-label">Schedule</span>
                        </div>
                        <div class="progress-step" data-step="3">
                            <div class="step-number">3</div>
                            <span class="step-label">Challenges</span>
                        </div>
                        <div class="progress-step" data-step="4">
                            <div class="step-number">4</div>
                            <span class="step-label">Lifestyle</span>
                        </div>
                        <div class="progress-step" data-step="5">
                            <div class="step-number">5</div>
                            <span class="step-label">Goals</span>
                        </div>
                    </div>
                    <div class="progress-bar-bg">
                        <div class="progress-bar-fill" id="progressFill" style="width: 10%;"></div>
                    </div>
                </div>
                
                <!-- Questions Container -->
                <div id="questions-container">
                    <!-- Question 1: Shift Type -->
                    <section class="question-section active" data-question="1">
                        <h3 class="question-title">What type of shift do you work?</h3>
                        <p class="question-description">Select the pattern that best matches your work schedule</p>
                        
                        <div class="options-grid">
                            <label class="option-card">
                                <input type="radio" name="shiftType" value="fixed-night">
                                <div class="option-icon">&#127769;</div>
                                <div class="option-title">Fixed Night Shifts</div>
                                <div class="option-desc">Always work nights (e.g., 10pm-6am)</div>
                            </label>
                            
                            <label class="option-card">
                                <input type="radio" name="shiftType" value="fixed-early">
                                <div class="option-icon">&#127749;</div>
                                <div class="option-title">Fixed Early Shifts</div>
                                <div class="option-desc">Always start early (e.g., 5am-1pm)</div>
                            </label>
                            
                            <label class="option-card">
                                <input type="radio" name="shiftType" value="fixed-late">
                                <div class="option-icon">&#127750;</div>
                                <div class="option-title">Fixed Late/Evening</div>
                                <div class="option-desc">Always work evenings (e.g., 2pm-10pm)</div>
                            </label>
                            
                            <label class="option-card">
                                <input type="radio" name="shiftType" value="rotating">
                                <div class="option-icon">&#128260;</div>
                                <div class="option-title">Rotating Shifts</div>
                                <div class="option-desc">Schedule changes weekly or bi-weekly</div>
                            </label>
                            
                            <label class="option-card">
                                <input type="radio" name="shiftType" value="split">
                                <div class="option-icon">&#128256;</div>
                                <div class="option-title">Split Shifts</div>
                                <div class="option-desc">Work in two separate blocks per day</div>
                            </label>
                            
                            <label class="option-card">
                                <input type="radio" name="shiftType" value="on-call">
                                <div class="option-icon">&#128222;</div>
                                <div class="option-title">On-Call/Irregular</div>
                                <div class="option-desc">Unpredictable hours or standby work</div>
                            </label>
                        </div>
                        
                        <div class="nav-buttons">
                            <div></div>
                            <button class="btn btn-primary" onclick="nextQuestion()" id="btn-next-1" disabled>Continue</button>
                        </div>
                    </section>
                    
                    <!-- Question 2: Schedule Details -->
                    <section class="question-section" data-question="2">
                        <h3 class="question-title">Your Shift Schedule</h3>
                        <p class="question-description">Tell us about your typical working hours</p>
                        
                        <div class="time-inputs">
                            <div class="time-group">
                                <label for="shiftStart">Shift Start Time</label>
                                <input type="time" id="shiftStart" value="22:00">
                            </div>
                            <div class="time-group">
                                <label for="shiftEnd">Shift End Time</label>
                                <input type="time" id="shiftEnd" value="06:00">
                            </div>
                        </div>
                        
                        <div class="slider-container">
                            <label style="font-size: 13px; font-weight: 600; color: var(--text-primary); margin-bottom: 12px; display: block;">
                                Commute Time (one way)
                            </label>
                            <div class="slider-label">
                                <span>5 min</span>
                                <span>60+ min</span>
                            </div>
                            <input type="range" id="commuteTime" min="5" max="60" value="30">
                            <div class="slider-value" id="commuteDisplay">30 minutes</div>
                        </div>
                        
                        <div class="nav-buttons">
                            <button class="btn btn-secondary" onclick="prevQuestion()">Back</button>
                            <button class="btn btn-primary" onclick="nextQuestion()">Continue</button>
                        </div>
                    </section>
                    
                    <!-- Question 3: Sleep Challenges -->
                    <section class="question-section" data-question="3">
                        <h3 class="question-title">What are your biggest sleep challenges?</h3>
                        <p class="question-description">Select all that apply to you</p>
                        
                        <div class="checkbox-grid">
                            <label class="checkbox-option">
                                <input type="checkbox" name="challenges" value="falling-asleep">
                                <span class="checkbox-icon">&#128564;</span>
                                <span>Difficulty falling asleep</span>
                            </label>
                            
                            <label class="checkbox-option">
                                <input type="checkbox" name="challenges" value="staying-asleep">
                                <span class="checkbox-icon">&#9200;</span>
                                <span>Waking up too early</span>
                            </label>
                            
                            <label class="checkbox-option">
                                <input type="checkbox" name="challenges" value="light">
                                <span class="checkbox-icon">&#9728;&#65039;</span>
                                <span>Too much daylight</span>
                            </label>
                            
                            <label class="checkbox-option">
                                <input type="checkbox" name="challenges" value="noise">
                                <span class="checkbox-icon">&#128266;</span>
                                <span>Household/street noise</span>
                            </label>
                            
                            <label class="checkbox-option">
                                <input type="checkbox" name="challenges" value="family">
                                <span class="checkbox-icon">&#128104;&#8205;&#128105;&#8205;&#128103;</span>
                                <span>Family interruptions</span>
                            </label>
                            
                            <label class="checkbox-option">
                                <input type="checkbox" name="challenges" value="alertness">
                                <span class="checkbox-icon">&#9749;</span>
                                <span>Still alert after shift</span>
                            </label>
                            
                            <label class="checkbox-option">
                                <input type="checkbox" name="challenges" value="transition">
                                <span class="checkbox-icon">&#128260;</span>
                                <span>Adjusting between shifts</span>
                            </label>
                            
                            <label class="checkbox-option">
                                <input type="checkbox" name="challenges" value="quality">
                                <span class="checkbox-icon">&#128164;</span>
                                <span>Poor sleep quality</span>
                            </label>
                        </div>
                        
                        <div class="nav-buttons">
                            <button class="btn btn-secondary" onclick="prevQuestion()">Back</button>
                            <button class="btn btn-primary" onclick="nextQuestion()">Continue</button>
                        </div>
                    </section>
                    
                    <!-- Question 4: Living Situation -->
                    <section class="question-section" data-question="4">
                        <h3 class="question-title">Your Living Situation</h3>
                        <p class="question-description">This helps us tailor recommendations</p>
                        
                        <div class="options-grid">
                            <label class="option-card">
                                <input type="radio" name="livingSituation" value="alone">
                                <div class="option-icon">&#127968;</div>
                                <div class="option-title">Live Alone</div>
                                <div class="option-desc">Full control over environment</div>
                            </label>
                            
                            <label class="option-card">
                                <input type="radio" name="livingSituation" value="partner">
                                <div class="option-icon">&#128145;</div>
                                <div class="option-title">With Partner</div>
                                <div class="option-desc">May have different schedules</div>
                            </label>
                            
                            <label class="option-card">
                                <input type="radio" name="livingSituation" value="family">
                                <div class="option-icon">&#128106;</div>
                                <div class="option-title">With Family/Kids</div>
                                <div class="option-desc">Household activity during day</div>
                            </label>
                            
                            <label class="option-card">
                                <input type="radio" name="livingSituation" value="shared">
                                <div class="option-icon">&#127969;</div>
                                <div class="option-title">Shared Housing</div>
                                <div class="option-desc">Roommates or shared spaces</div>
                            </label>
                        </div>
                        
                        <h3 class="question-title" style="margin-top: 24px;">How long have you worked shifts?</h3>
                        
                        <div class="options-grid" style="margin-top: 16px;">
                            <label class="option-card">
                                <input type="radio" name="experience" value="new">
                                <div class="option-icon">&#127381;</div>
                                <div class="option-title">New to Shifts</div>
                                <div class="option-desc">Less than 3 months</div>
                            </label>
                            
                            <label class="option-card">
                                <input type="radio" name="experience" value="adjusting">
                                <div class="option-icon">&#9878;&#65039;</div>
                                <div class="option-title">Still Adjusting</div>
                                <div class="option-desc">3 months - 1 year</div>
                            </label>
                            
                            <label class="option-card">
                                <input type="radio" name="experience" value="experienced">
                                <div class="option-icon">&#128170;</div>
                                <div class="option-title">Experienced</div>
                                <div class="option-desc">Over 1 year</div>
                            </label>
                        </div>
                        
                        <div class="nav-buttons">
                            <button class="btn btn-secondary" onclick="prevQuestion()">Back</button>
                            <button class="btn btn-primary" onclick="nextQuestion()" id="btn-next-4" disabled>Continue</button>
                        </div>
                    </section>
                    
                    <!-- Question 5: Goals -->
                    <section class="question-section" data-question="5">
                        <h3 class="question-title">What's your main goal?</h3>
                        <p class="question-description">We'll prioritize recommendations accordingly</p>
                        
                        <div class="options-grid">
                            <label class="option-card">
                                <input type="radio" name="goal" value="more-sleep">
                                <div class="option-icon">&#9200;</div>
                                <div class="option-title">More Sleep Time</div>
                                <div class="option-desc">Maximize total hours of sleep</div>
                            </label>
                            
                            <label class="option-card">
                                <input type="radio" name="goal" value="better-quality">
                                <div class="option-icon">&#10024;</div>
                                <div class="option-title">Better Quality</div>
                                <div class="option-desc">Deeper, more restorative sleep</div>
                            </label>
                            
                            <label class="option-card">
                                <input type="radio" name="goal" value="easier-transitions">
                                <div class="option-icon">&#128260;</div>
                                <div class="option-title">Easier Transitions</div>
                                <div class="option-desc">Smoother shift changes</div>
                            </label>
                            
                            <label class="option-card">
                                <input type="radio" name="goal" value="work-alertness">
                                <div class="option-icon">&#9889;</div>
                                <div class="option-title">Work Alertness</div>
                                <div class="option-desc">Stay sharp during shifts</div>
                            </label>
                        </div>
                        
                        <div class="nav-buttons">
                            <button class="btn btn-secondary" onclick="prevQuestion()">Back</button>
                            <button class="btn btn-primary" onclick="generateResults()" id="btn-next-5" disabled>Get My Sleep Plan</button>
                        </div>
                    </section>
                </div>
                
                <!-- Results Section -->
                <section class="results-section" id="resultsSection">
                    <!-- Results will be dynamically generated -->
                </section>
            </div>
        </div>
        
        <!-- Info Sections (SEO Content) -->
        <div class="info-section">
            <div class="info-toggle">
                <div class="toggle-header" onclick="toggleInfo(this)">
                    <span class="toggle-title">Why Shift Workers Need Special Sleep Strategies</span>
                    <span class="toggle-icon">&#9660;</span>
                </div>
                <div class="info-content">
                    <h4>The Circadian Challenge</h4>
                    <p>Shift workers face a unique challenge: their work schedule conflicts with their body's natural circadian rhythm. This internal clock, regulated by light exposure and melatonin production, naturally promotes wakefulness during daylight and sleep at night.</p>
                    
                    <h4>Health Implications</h4>
                    <p>Research shows that shift work is associated with increased risks of:</p>
                    <ul>
                        <li>Cardiovascular disease and metabolic disorders</li>
                        <li>Gastrointestinal problems</li>
                        <li>Mental health challenges including depression and anxiety</li>
                        <li>Workplace accidents due to fatigue</li>
                    </ul>
                    
                    <h4>The Good News</h4>
                    <p>With proper strategies, shift workers can significantly improve their sleep quality and reduce health risks. Key approaches include optimizing the sleep environment, strategic light exposure, and maintaining consistent routines where possible.</p>
                </div>
            </div>
            
            <div class="info-toggle">
                <div class="toggle-header" onclick="toggleInfo(this)">
                    <span class="toggle-title">Optimal Sleep Schedules by Shift Type</span>
                    <span class="toggle-icon">&#9660;</span>
                </div>
                <div class="info-content">
                    <table class="info-table">
                        <thead>
                            <tr>
                                <th>Shift Type</th>
                                <th>Recommended Sleep Window</th>
                                <th>Key Strategy</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Night Shift (10pm-6am)</td>
                                <td>7:30am - 3:30pm</td>
                                <td>Sleep immediately after shift</td>
                            </tr>
                            <tr>
                                <td>Early Shift (5am-1pm)</td>
                                <td>8:00pm - 4:00am</td>
                                <td>Early bedtime, avoid screens</td>
                            </tr>
                            <tr>
                                <td>Late Shift (2pm-10pm)</td>
                                <td>11:30pm - 7:30am</td>
                                <td>Wind-down routine after shift</td>
                            </tr>
                            <tr>
                                <td>Rotating Shifts</td>
                                <td>Varies by rotation</td>
                                <td>Gradual adjustment (1-2 hours/day)</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <h4>Anchor Sleep Concept</h4>
                    <p>Rotating shift workers benefit from maintaining an "anchor sleep" period - a consistent 4-hour block that remains the same regardless of shift schedule. This helps maintain some circadian stability.</p>
                </div>
            </div>
            
            <div class="info-toggle">
                <div class="toggle-header" onclick="toggleInfo(this)">
                    <span class="toggle-title">Evidence-Based Tips for Daytime Sleeping</span>
                    <span class="toggle-icon">&#9660;</span>
                </div>
                <div class="info-content">
                    <h4>Creating a Dark Environment</h4>
                    <p>Light is the primary signal for your circadian rhythm. Even small amounts of light can disrupt melatonin production and sleep quality.</p>
                    <ul>
                        <li>Use blackout curtains or blinds (look for 99%+ light blocking)</li>
                        <li>Cover LED lights on electronics with tape</li>
                        <li>Consider a quality sleep mask for complete darkness</li>
                        <li>Use blackout portable blinds when traveling</li>
                    </ul>
                    
                    <h4>Managing Noise</h4>
                    <p>Daytime noise from traffic, neighbors, and household activity can fragment sleep.</p>
                    <ul>
                        <li>White noise machines mask inconsistent sounds</li>
                        <li>Earplugs designed for sleep (NRR 25-33)</li>
                        <li>Communicate sleep schedule to household members</li>
                        <li>"Do Not Disturb" signs for bedroom doors</li>
                    </ul>
                    
                    <h4>Temperature Control</h4>
                    <p>Body temperature naturally drops during sleep. Keeping your bedroom cool (15-19C / 60-67F) supports this process and improves sleep quality.</p>
                </div>
            </div>
            
            <div class="info-toggle">
                <div class="toggle-header" onclick="toggleInfo(this)">
                    <span class="toggle-title">Strategic Light Exposure for Shift Workers</span>
                    <span class="toggle-icon">&#9660;</span>
                </div>
                <div class="info-content">
                    <h4>Light as a Circadian Tool</h4>
                    <p>Strategic light exposure can help shift workers adjust their circadian rhythm to better match their work schedule.</p>
                    
                    <h4>For Night Shift Workers</h4>
                    <ul>
                        <li>Use bright light (10,000 lux) during the first half of your shift</li>
                        <li>Wear blue-light blocking glasses on the commute home</li>
                        <li>Avoid bright light for 1-2 hours before planned sleep</li>
                        <li>Get bright light exposure when you wake up</li>
                    </ul>
                    
                    <h4>Light Therapy Guidelines</h4>
                    <table class="info-table">
                        <thead>
                            <tr>
                                <th>Goal</th>
                                <th>Light Timing</th>
                                <th>Duration</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Delay sleep (stay up later)</td>
                                <td>Evening exposure</td>
                                <td>30-60 minutes</td>
                            </tr>
                            <tr>
                                <td>Advance sleep (sleep earlier)</td>
                                <td>Morning exposure</td>
                                <td>30-60 minutes</td>
                            </tr>
                            <tr>
                                <td>Night shift adaptation</td>
                                <td>First 6 hours of shift</td>
                                <td>Continuous bright environment</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="info-toggle">
                <div class="toggle-header" onclick="toggleInfo(this)">
                    <span class="toggle-title">When to Seek Professional Help</span>
                    <span class="toggle-icon">&#9660;</span>
                </div>
                <div class="info-content">
                    <h4>Sleep Problems That Require Medical Attention</h4>
                    <p>While optimizing your sleep schedule can significantly improve sleep quality for shift workers, some sleep issues require professional medical evaluation. Consult a healthcare provider if you experience:</p>
                    
                    <ul>
                        <li><strong>Persistent insomnia:</strong> Difficulty falling or staying asleep for more than 3 weeks despite schedule adjustments</li>
                        <li><strong>Excessive daytime sleepiness:</strong> Despite getting adequate sleep hours</li>
                        <li><strong>Shift Work Sleep Disorder (SWSD):</strong> Chronic sleep problems specifically related to your work schedule</li>
                        <li><strong>Loud snoring with pauses:</strong> May indicate sleep apnea, which is more common in shift workers</li>
                        <li><strong>Depression or anxiety:</strong> Shift work can exacerbate mental health conditions</li>
                        <li><strong>Falling asleep inappropriately:</strong> During conversations, driving, or at work</li>
                        <li><strong>Reliance on sleep aids:</strong> Needing medication or alcohol to fall asleep regularly</li>
                    </ul>
                    
                    <h4>Red Flag Symptoms - Seek Immediate Help</h4>
                    <p style="color: #D93333; font-weight: 500;">Contact a healthcare provider urgently if you experience:</p>
                    <ul>
                        <li>Choking or gasping during sleep (observed by partner)</li>
                        <li>Severe chest pain or difficulty breathing</li>
                        <li>Falling asleep while driving or operating machinery</li>
                        <li>Suicidal thoughts or severe depression</li>
                        <li>Hallucinations or confusion related to sleep deprivation</li>
                    </ul>
                    
                    <h4>Emergency Contacts by Region</h4>
                    <table class="info-table">
                        <thead>
                            <tr>
                                <th>Country</th>
                                <th>Emergency Services</th>
                                <th>Non-Emergency Health Line</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>United Kingdom</td>
                                <td>999</td>
                                <td>NHS 111</td>
                            </tr>
                            <tr>
                                <td>United States</td>
                                <td>911</td>
                                <td>Contact primary care provider</td>
                            </tr>
                            <tr>
                                <td>Canada</td>
                                <td>911</td>
                                <td>Telehealth (varies by province)</td>
                            </tr>
                            <tr>
                                <td>Australia</td>
                                <td>000</td>
                                <td>Healthdirect 1800 022 222</td>
                            </tr>
                            <tr>
                                <td>Ireland</td>
                                <td>999 / 112</td>
                                <td>HSELive 1800 700 700</td>
                            </tr>
                            <tr>
                                <td>Germany</td>
                                <td>112</td>
                                <td>116 117</td>
                            </tr>
                            <tr>
                                <td>France</td>
                                <td>15 (SAMU) / 112</td>
                                <td>Contact local medecin</td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <p><em>For other countries including India, Japan, China, Netherlands, New Zealand, Italy, Spain, UAE, Poland, Portugal, Sweden, Turkey, Russia, and Brazil - please search for your local emergency services number.</em></p>
                    
                    <div style="background: var(--warning); border-left: 4px solid var(--accent); padding: 16px; margin-top: 16px; border-radius: var(--radius-md);">
                        <strong>Medical Disclaimer</strong>
                        <p style="margin-top: 8px; font-size: 13px;">This tool provides general recommendations for shift worker sleep scheduling and is not intended as a substitute for professional medical advice, diagnosis, or treatment. Always seek the advice of your GP, physician, occupational health specialist, or other qualified health provider with any specific questions about sleep disorders, shift work disorder, or health concerns. If you believe you may have a medical emergency, call your local emergency services immediately.</p>
                    </div>
                </div>
            </div>
            
            <div class="info-toggle">
                <div class="toggle-header" onclick="toggleInfo(this)">
                    <span class="toggle-title">About This Tool & How It Works</span>
                    <span class="toggle-icon">&#9660;</span>
                </div>
                <div class="info-content">
                    <h4>How the Shift Worker Sleep Planner Works</h4>
                    <p>This free planning tool creates personalized sleep schedules based on your specific shift pattern, commute time, living situation, and sleep challenges. Our recommendations are based on evidence from circadian rhythm research, occupational health guidelines, and sleep science from organizations including the Sleep Foundation, National Institute for Occupational Safety and Health (NIOSH), and peer-reviewed shift work research.</p>
                    
                    <h4>Calculation Methodology</h4>
                    <p>Your sleep schedule is calculated using several key principles:</p>
                    <ul>
                        <li><strong>Post-shift sleep timing:</strong> We recommend sleeping soon after your shift ends, before your body's circadian alerting signal increases</li>
                        <li><strong>Sleep cycles:</strong> We target 7.5 hours (5 complete 90-minute sleep cycles) for optimal restoration</li>
                        <li><strong>Wind-down period:</strong> A 45-minute buffer is built in for your post-work routine</li>
                        <li><strong>Commute factoring:</strong> Your travel time is accounted for in all schedule calculations</li>
                        <li><strong>Challenge-based tips:</strong> Recommendations are prioritized based on your specific sleep challenges</li>
                    </ul>
                    
                    <h4>What We Do With Your Data</h4>
                    <p>Your assessment responses are processed entirely in your browser - we do not store your answers on our servers unless you choose to receive a personalized report via email. If you opt in to receive an email report, we store only your first name, email address, and assessment results to deliver your report. By providing your email, you consent to receiving your results and occasional relevant product recommendations from Spacire. You can unsubscribe at any time.</p>
                    
                    <h4>About Spacire</h4>
                    <p>Spacire is a sleep wellness company dedicated to helping people achieve better rest through natural, science-backed solutions. We offer carefully curated sleep products including sleep masks, white noise machines, blackout curtains, aromatherapy sprays, and weighted blankets - all particularly useful for shift workers who need to create optimal sleep environments during unconventional hours.</p>
                    
                    <p>Our recommendations are based on genuine product benefits, and we always provide non-purchase alternatives (DIY tips) alongside product suggestions. We believe that good sleep should be accessible to everyone, regardless of budget.</p>
                    
                    <p><a href="https://spacire.com/pages/about-us" target="_blank" rel="noopener">Learn more about Spacire</a></p>
                </div>
            </div>
            
            <div class="info-toggle">
                <div class="toggle-header" onclick="toggleInfo(this)">
                    <span class="toggle-title">Please Share This Tool</span>
                    <span class="toggle-icon">&#9660;</span>
                </div>
                <div class="info-content">
                    <h4>Help Other Shift Workers Sleep Better</h4>
                    <p>If you found this tool helpful, please consider sharing it with colleagues, friends, or family members who work non-traditional hours. Shift work affects millions of people worldwide, including nurses, doctors, factory workers, security personnel, pilots, truck drivers, emergency responders, and many others.</p>
                    
                    <h4>Share on Social Media</h4>
                    <div style="display: flex; gap: 12px; flex-wrap: wrap; margin: 16px 0;">
                        <a href="https://twitter.com/intent/tweet?url=https://tools.spacire.com/shift-worker-sleep-planner&text=Free%20Shift%20Worker%20Sleep%20Planner%20-%20Get%20a%20personalized%20sleep%20schedule%20for%20your%20shift%20pattern" target="_blank" rel="noopener noreferrer" style="display: inline-flex; align-items: center; gap: 8px; padding: 10px 16px; background: #1DA1F2; color: white; text-decoration: none; border-radius: var(--radius-md); font-size: 14px; font-weight: 500;">
                            Share on X/Twitter
                        </a>
                        <a href="https://www.facebook.com/sharer/sharer.php?u=https://tools.spacire.com/shift-worker-sleep-planner" target="_blank" rel="noopener noreferrer" style="display: inline-flex; align-items: center; gap: 8px; padding: 10px 16px; background: #4267B2; color: white; text-decoration: none; border-radius: var(--radius-md); font-size: 14px; font-weight: 500;">
                            Share on Facebook
                        </a>
                        <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://tools.spacire.com/shift-worker-sleep-planner&title=Shift%20Worker%20Sleep%20Planner" target="_blank" rel="noopener noreferrer" style="display: inline-flex; align-items: center; gap: 8px; padding: 10px 16px; background: #0077B5; color: white; text-decoration: none; border-radius: var(--radius-md); font-size: 14px; font-weight: 500;">
                            Share on LinkedIn
                        </a>
                        <a href="https://api.whatsapp.com/send?text=Check%20out%20this%20free%20Shift%20Worker%20Sleep%20Planner:%20https://tools.spacire.com/shift-worker-sleep-planner" target="_blank" rel="noopener noreferrer" style="display: inline-flex; align-items: center; gap: 8px; padding: 10px 16px; background: #25D366; color: white; text-decoration: none; border-radius: var(--radius-md); font-size: 14px; font-weight: 500;">
                            Share on WhatsApp
                        </a>
                    </div>
                    
                    <h4>Copy Link</h4>
                    <div style="display: flex; gap: 8px; align-items: center;">
                        <input type="text" value="https://tools.spacire.com/shift-worker-sleep-planner" readonly style="flex: 1; padding: 10px 12px; border: 1px solid var(--border); border-radius: var(--radius-md); font-size: 13px; background: var(--hover);" id="shareLink">
                        <button onclick="copyShareLink()" style="padding: 10px 16px; background: var(--primary); color: white; border: none; border-radius: var(--radius-md); cursor: pointer; font-size: 13px; font-weight: 500;">Copy</button>
                    </div>
                    <p id="copyConfirm" style="display: none; color: var(--success-dark); font-size: 13px; margin-top: 8px;">Link copied to clipboard!</p>
                    
                    <h4>Other Ways to Help</h4>
                    <ul>
                        <li>Forward this tool to your workplace HR or occupational health department</li>
                        <li>Share in shift worker forums or Facebook groups</li>
                        <li>Mention it in nursing, healthcare, or manufacturing communities</li>
                        <li>Link to this tool from your blog or website</li>
                    </ul>
                    
                    <p style="margin-top: 16px; font-size: 13px; color: var(--text-light);">This tool is completely free and always will be. Our goal is to help as many shift workers as possible get better sleep.</p>
                </div>
            </div>
        </div>
    </main>
    
    <!-- Footer (identical to Tool 1) -->
    <footer class="site-footer">
        <div class="footer-content">
            <div class="footer-grid">
                <div class="footer-section">
                    <h4>Sleep Tools</h4>
                    <a href="https://tools.spacire.com/sleep-environment-optimizer.html">Sleep Environment Optimizer</a>
                    <a href="https://tools.spacire.com/shift-worker-sleep-planner.html">Shift Worker Sleep Planner</a>
                    <a href="#">White Noise Finder</a>
                    <a href="#">Bedtime Routine Generator</a>
                    <a href="#">Natural Sleep Remedies</a>
                </div>
                <div class="footer-section">
                    <h4>Shop</h4>
                    <a href="https://spacire.com/collections/sleep-masks">Sleep Masks</a>
                    <a href="https://spacire.com/collections/white-noise-machines">White Noise Machines</a>
                    <a href="https://spacire.com/collections/blackout-curtains">Blackout Curtains</a>
                    <a href="https://spacire.com/collections/pillow-sleep-sprays">Sleep Sprays</a>
                    <a href="https://spacire.com/collections/weighted-blankets">Weighted Blankets</a>
                </div>
                <div class="footer-section">
                    <h4>Company</h4>
                    <a href="https://spacire.com/blogs/journal">Sleep Journal</a>
                    <a href="https://spacire.com/pages/about-us">About Us</a>
                    <a href="https://spacire.com/pages/contact">Contact</a>
                    <a href="https://spacire.com/pages/faqs">FAQs</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Spacire (The Valen Collective LTD). Company Registered in England &amp; Wales. Reg: 16695657. 167 Kennington Road, Nottingham, NG8 1QE, UK.</p>
                <div class="footer-legal">
                    <a href="https://spacire.com/policies/privacy-policy">Privacy Policy</a>
                    <a href="https://spacire.com/policies/terms-of-service">Terms of Service</a>
                    <a href="https://spacire.com/policies/refund-policy">Refunds</a>
                    <a href="https://spacire.com/policies/shipping-policy">Shipping</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // ========================================
        // CONFIGURATION (correct Appwrite IDs)
        // ========================================
        const APPWRITE_ENDPOINT = 'https://nyc.cloud.appwrite.io/v1';
        const APPWRITE_PROJECT_ID = '6839f9c60026aborfc7a';
        const APPWRITE_DATABASE_ID = '6839fbb20004c220250a';
        const APPWRITE_COLLECTION_ID = '683a003c0025bf169ceb';
        const APPWRITE_FUNCTION_ID = '683a0144003b3bfc5ee0';
        
        // ========================================
        // STATE MANAGEMENT
        // ========================================
        let currentQuestion = 1;
        const totalQuestions = 5;
        
        const userData = {
            shiftType: null,
            shiftStart: '22:00',
            shiftEnd: '06:00',
            commute: 30,
            challenges: [],
            livingSituation: null,
            experience: null,
            goal: null
        };
        
        // ========================================
        // MOBILE MENU
        // ========================================
        function toggleMobileMenu() {
            document.getElementById('mobileNav').classList.toggle('active');
        }
        
        // ========================================
        // INFO TOGGLES
        // ========================================
        function toggleInfo(header) {
            const toggle = header.parentElement;
            const content = toggle.querySelector('.info-content');
            toggle.classList.toggle('open');
            content.classList.toggle('open');
        }
        
        // ========================================
        // COMMUTE SLIDER
        // ========================================
        const commuteSlider = document.getElementById('commuteTime');
        const commuteDisplay = document.getElementById('commuteDisplay');
        
        if (commuteSlider) {
            commuteSlider.addEventListener('input', function() {
                const value = this.value;
                commuteDisplay.textContent = value >= 60 ? '60+ minutes' : value + ' minutes';
                userData.commute = parseInt(value);
                
                const percent = ((value - 5) / 55) * 100;
                this.style.background = `linear-gradient(90deg, var(--primary) 0%, var(--primary) ${percent}%, var(--border) ${percent}%)`;
            });
            
            const initialPercent = ((commuteSlider.value - 5) / 55) * 100;
            commuteSlider.style.background = `linear-gradient(90deg, var(--primary) 0%, var(--primary) ${initialPercent}%, var(--border) ${initialPercent}%)`;
        }
        
        // ========================================
        // OPTION SELECTION
        // ========================================
        document.querySelectorAll('.option-card').forEach(card => {
            card.addEventListener('click', function() {
                const input = this.querySelector('input');
                const name = input.name;
                
                if (input.type === 'radio') {
                    document.querySelectorAll(`input[name="${name}"]`).forEach(radio => {
                        radio.closest('.option-card').classList.remove('selected');
                    });
                    this.classList.add('selected');
                    input.checked = true;
                    
                    if (name === 'shiftType') {
                        userData.shiftType = input.value;
                        document.getElementById('btn-next-1').disabled = false;
                    } else if (name === 'livingSituation') {
                        userData.livingSituation = input.value;
                        checkQuestion4();
                    } else if (name === 'experience') {
                        userData.experience = input.value;
                        checkQuestion4();
                    } else if (name === 'goal') {
                        userData.goal = input.value;
                        document.getElementById('btn-next-5').disabled = false;
                    }
                }
            });
        });
        
        document.querySelectorAll('.checkbox-option').forEach(option => {
            option.addEventListener('click', function() {
                const input = this.querySelector('input');
                input.checked = !input.checked;
                this.classList.toggle('selected', input.checked);
                
                if (input.checked) {
                    userData.challenges.push(input.value);
                } else {
                    userData.challenges = userData.challenges.filter(c => c !== input.value);
                }
            });
        });
        
        function checkQuestion4() {
            const btn = document.getElementById('btn-next-4');
            if (userData.livingSituation && userData.experience) {
                btn.disabled = false;
            }
        }
        
        // ========================================
        // NAVIGATION
        // ========================================
        function updateProgress() {
            const progressFill = document.getElementById('progressFill');
            const percentage = (currentQuestion / totalQuestions) * 100;
            progressFill.style.width = percentage + '%';
            
            document.querySelectorAll('.progress-step').forEach((step, index) => {
                const stepNum = index + 1;
                step.classList.remove('active', 'completed');
                if (stepNum < currentQuestion) {
                    step.classList.add('completed');
                } else if (stepNum === currentQuestion) {
                    step.classList.add('active');
                }
            });
        }
        
        function showQuestion(num) {
            document.querySelectorAll('.question-section').forEach(section => {
                section.classList.remove('active');
            });
            document.querySelector(`[data-question="${num}"]`).classList.add('active');
            currentQuestion = num;
            updateProgress();
        }
        
        function nextQuestion() {
            if (currentQuestion === 2) {
                userData.shiftStart = document.getElementById('shiftStart').value;
                userData.shiftEnd = document.getElementById('shiftEnd').value;
            }
            
            if (currentQuestion < totalQuestions) {
                showQuestion(currentQuestion + 1);
            }
        }
        
        function prevQuestion() {
            if (currentQuestion > 1) {
                showQuestion(currentQuestion - 1);
            }
        }
        
        // ========================================
        // RESULTS GENERATION
        // ========================================
        function generateResults() {
            const schedule = calculateSleepSchedule();
            const tips = generateTips();
            const products = getProductRecommendations();
            
            const resultsHtml = buildResultsHTML(schedule, tips, products);
            
            document.getElementById('questions-container').style.display = 'none';
            const resultsSection = document.getElementById('resultsSection');
            resultsSection.innerHTML = resultsHtml;
            resultsSection.classList.add('active');
            
            document.getElementById('progressFill').style.width = '100%';
            document.querySelectorAll('.progress-step').forEach(step => {
                step.classList.add('completed');
                step.classList.remove('active');
            });
            
            document.querySelector('.tool-card').scrollIntoView({ behavior: 'smooth', block: 'start' });
            
            saveResults(schedule, tips);
        }
        
        function calculateSleepSchedule() {
            const shiftStart = userData.shiftStart;
            const shiftEnd = userData.shiftEnd;
            const commute = userData.commute;
            
            const [endHour, endMin] = shiftEnd.split(':').map(Number);
            const [startHour, startMin] = shiftStart.split(':').map(Number);
            
            let arriveHomeHour = endHour;
            let arriveHomeMin = endMin + commute;
            if (arriveHomeMin >= 60) {
                arriveHomeHour += Math.floor(arriveHomeMin / 60);
                arriveHomeMin = arriveHomeMin % 60;
            }
            if (arriveHomeHour >= 24) arriveHomeHour -= 24;
            
            let sleepHour = arriveHomeHour;
            let sleepMin = arriveHomeMin + 45;
            if (sleepMin >= 60) {
                sleepHour += 1;
                sleepMin -= 60;
            }
            if (sleepHour >= 24) sleepHour -= 24;
            
            let wakeHour = sleepHour + 7;
            let wakeMin = sleepMin + 30;
            if (wakeMin >= 60) {
                wakeHour += 1;
                wakeMin -= 60;
            }
            if (wakeHour >= 24) wakeHour -= 24;
            
            let prepHour = startHour;
            let prepMin = startMin - commute - 60;
            while (prepMin < 0) {
                prepHour -= 1;
                prepMin += 60;
            }
            if (prepHour < 0) prepHour += 24;
            
            const formatTime = (h, m) => `${h.toString().padStart(2, '0')}:${m.toString().padStart(2, '0')}`;
            
            return {
                arriveHome: formatTime(arriveHomeHour, arriveHomeMin),
                sleepTime: formatTime(sleepHour, sleepMin),
                wakeTime: formatTime(wakeHour, wakeMin),
                prepTime: formatTime(prepHour, prepMin),
                sleepDuration: '7.5 hours (5 sleep cycles)'
            };
        }
        
        function generateTips() {
            const tips = [];
            
            if (userData.challenges.includes('light')) {
                tips.push({
                    title: 'Block Out Daylight',
                    priority: 'high',
                    text: 'Invest in quality blackout curtains or blinds. Even small amounts of light can reduce melatonin production by up to 50%. Consider adding a sleep mask for complete darkness.',
                    diy: ['Use heavy blankets over windows as temporary blackout', 'Cover all LED lights with electrical tape', 'Wear sunglasses on commute home']
                });
            }
            
            if (userData.challenges.includes('noise')) {
                tips.push({
                    title: 'Manage Daytime Noise',
                    priority: 'high',
                    text: 'White noise machines are highly effective at masking inconsistent sounds like traffic, conversations, and household activity.',
                    diy: ['Use a fan for basic white noise', 'Free white noise apps can work in a pinch', 'Communicate your sleep schedule to household members']
                });
            }
            
            if (userData.challenges.includes('falling-asleep')) {
                tips.push({
                    title: 'Create a Wind-Down Routine',
                    priority: 'high',
                    text: 'Your body needs time to transition from work mode to sleep mode. A consistent 30-45 minute wind-down routine signals to your brain that sleep is coming.',
                    diy: ['Take a warm shower (body temp drop promotes sleep)', 'Avoid screens for 30 min before bed', 'Light stretching or gentle yoga']
                });
            }
            
            if (userData.challenges.includes('family')) {
                tips.push({
                    title: 'Coordinate with Family',
                    priority: 'medium',
                    text: 'Family support is crucial for shift worker sleep success. Clear communication about your schedule helps everyone.',
                    diy: ['Create a visible sleep schedule for family', 'Use "Do Not Disturb" sign on bedroom door', 'Consider a video doorbell to avoid knocking']
                });
            }
            
            tips.push({
                title: 'Optimize Your Sleep Environment',
                priority: 'medium',
                text: 'The ideal sleep environment is cool (15-19C / 60-67F), dark, and quiet. This is even more important for daytime sleeping.',
                diy: ['Keep bedroom cooler than other rooms', 'Use breathable bedding materials', 'Remove or cover clocks to avoid time-checking']
            });
            
            if (userData.shiftType === 'rotating') {
                tips.push({
                    title: 'Managing Shift Transitions',
                    priority: 'high',
                    text: 'Rotating shifts are the most challenging. Try to shift your sleep time by 1-2 hours per day in the direction of your upcoming shift.',
                    diy: ['Use light exposure strategically to shift rhythm', 'Maintain an "anchor sleep" period that stays consistent', 'Consider split sleep on transition days']
                });
            }
            
            return tips;
        }
        
        function getProductRecommendations() {
            const products = [];
            
            if (userData.challenges.includes('light')) {
                products.push({
                    name: 'Blackout Sleep Mask',
                    price: '12.99',
                    url: 'https://spacire.com/collections/sleep-masks',
                    image: 'https://spacire.com/cdn/shop/files/contoured-blackout-sleep-mask-spacire-768.jpg?v=1748787368',
                    reason: 'Essential for blocking daylight during daytime sleep'
                });
                products.push({
                    name: 'Blackout Curtains',
                    price: '34.99',
                    url: 'https://spacire.com/collections/blackout-curtains',
                    image: 'https://spacire.com/cdn/shop/files/blackout-curtains-grommet-spacire.jpg?v=1748888186',
                    reason: '99% light blocking for optimal daytime darkness'
                });
            }
            
            if (userData.challenges.includes('noise')) {
                products.push({
                    name: 'White Noise Machine',
                    price: '29.99',
                    url: 'https://spacire.com/collections/white-noise-machines',
                    image: 'https://spacire.com/cdn/shop/files/wireless-white-noise-machine-spacire_5.jpg?v=1749033218',
                    reason: 'Masks household and street noise effectively'
                });
            }
            
            if (userData.challenges.includes('falling-asleep')) {
                products.push({
                    name: 'Lavender Sleep Spray',
                    price: '9.99',
                    url: 'https://spacire.com/collections/pillow-sleep-sprays',
                    image: 'https://spacire.com/cdn/shop/files/lavender-pillow-sleep-spray-essential-oils-spacire.jpg?v=1748891199',
                    reason: 'Aromatherapy shown to improve sleep onset'
                });
            }
            
            if (userData.challenges.includes('quality') || userData.goal === 'better-quality') {
                products.push({
                    name: 'Weighted Blanket',
                    price: '49.99',
                    url: 'https://spacire.com/collections/weighted-blankets',
                    image: 'https://spacire.com/cdn/shop/files/weighted-blanket-dark-grey-spacire-quilt.jpg?v=1748892007',
                    reason: 'Deep pressure therapy for deeper, more restful sleep'
                });
            }
            
            return products.slice(0, 4);
        }
        
        function buildResultsHTML(schedule, tips, products) {
            let html = `
                <div class="score-display">
                    <div class="score-label">Your Personalized Sleep Plan</div>
                    <div class="score-value">Ready!</div>
                    <div class="score-subtitle">Optimized for ${getShiftTypeName(userData.shiftType)}</div>
                </div>
                
                <div class="schedule-card">
                    <h3 class="schedule-title">Your Recommended Schedule</h3>
                    <div class="schedule-grid">
                        <div class="schedule-item">
                            <div class="schedule-time">${schedule.arriveHome}</div>
                            <div class="schedule-activity">Arrive Home</div>
                        </div>
                        <div class="schedule-item">
                            <div class="schedule-time">${schedule.sleepTime}</div>
                            <div class="schedule-activity">Go to Sleep</div>
                        </div>
                        <div class="schedule-item">
                            <div class="schedule-time">${schedule.wakeTime}</div>
                            <div class="schedule-activity">Wake Up</div>
                        </div>
                        <div class="schedule-item">
                            <div class="schedule-time">${schedule.prepTime}</div>
                            <div class="schedule-activity">Start Preparing</div>
                        </div>
                    </div>
                    <p style="text-align: center; margin-top: 16px; font-size: 14px; color: var(--text-secondary);">
                        Target sleep: <strong>${schedule.sleepDuration}</strong>
                    </p>
                </div>
                
                <div class="recommendations-section">
                    <h3 class="section-title">Personalized Recommendations</h3>
            `;
            
            tips.forEach(tip => {
                html += `
                    <div class="recommendation-card priority-${tip.priority}">
                        <div class="recommendation-header">
                            <div class="recommendation-title">${tip.title}</div>
                            <span class="priority-badge ${tip.priority}">${tip.priority} priority</span>
                        </div>
                        <p class="recommendation-text">${tip.text}</p>
                        ${tip.diy ? `
                            <div class="diy-tips">
                                <div class="diy-tips-title">DIY Tips:</div>
                                <ul>
                                    ${tip.diy.map(d => `<li>${d}</li>`).join('')}
                                </ul>
                            </div>
                        ` : ''}
                    </div>
                `;
            });
            
            html += `</div>`;
            
            if (products.length > 0) {
                html += `<div class="recommendations-section"><h3 class="section-title">Recommended Products</h3>`;
                products.forEach(product => {
                    html += `
                        <div class="product-recommendation">
                            <img src="${product.image}" alt="${product.name}" class="product-image" onerror="this.style.background='#f0f0f0'">
                            <div class="product-info">
                                <div class="product-name">${product.name}</div>
                                <div style="font-size: 12px; color: var(--text-light); margin-bottom: 4px;">${product.reason}</div>
                                <div class="product-price">From £${product.price}</div>
                            </div>
                            <a href="${product.url}" class="product-link" target="_blank">View Options</a>
                        </div>
                    `;
                });
                html += `</div>`;
            }
            
            html += `
                <div class="email-capture">
                    <div class="email-capture-title">Get Your Full Report (Optional)</div>
                    <p class="email-capture-text">Receive your complete sleep plan with detailed schedule, all tips, and printable guide via email.</p>
                    <div class="email-form">
                        <input type="text" id="userName" class="email-input" placeholder="First name *" maxlength="64" required>
                        <input type="email" id="userEmail" class="email-input" placeholder="Email address *" required>
                        <button class="btn btn-primary" onclick="sendReport()">Send Report</button>
                    </div>
                    <div class="form-error" id="formError" style="display: none; color: #D93333; font-size: 13px; margin-top: 8px;"></div>
                    <div class="email-success" id="emailSuccess">Report sent! Check your inbox.</div>
                </div>
                
                <div style="text-align: center; margin-top: 24px;">
                    <button class="btn btn-secondary" onclick="startOver()">Start Over</button>
                </div>
            `;
            
            return html;
        }
        
        function getShiftTypeName(type) {
            const names = {
                'fixed-night': 'Fixed Night Shifts',
                'fixed-early': 'Fixed Early Shifts',
                'fixed-late': 'Fixed Late/Evening Shifts',
                'rotating': 'Rotating Shifts',
                'split': 'Split Shifts',
                'on-call': 'On-Call/Irregular Hours'
            };
            return names[type] || 'Your Shift Pattern';
        }
        
        function startOver() {
            location.reload();
        }
        
        // ========================================
        // DATABASE & EMAIL
        // ========================================
        async function saveResults(schedule, tips) {
            try {
                const response = await fetch(`${APPWRITE_ENDPOINT}/databases/${APPWRITE_DATABASE_ID}/collections/${APPWRITE_COLLECTION_ID}/documents`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Appwrite-Project': APPWRITE_PROJECT_ID
                    },
                    body: JSON.stringify({
                        documentId: 'unique()',
                        data: {
                            tool_name: 'shift-worker-sleep-planner',
                            results_json: JSON.stringify({
                                userData,
                                schedule,
                                tips: tips.map(t => t.title)
                            }),
                            created_at: new Date().toISOString()
                        }
                    })
                });
                
                if (response.ok) {
                    console.log('Results saved successfully');
                }
            } catch (error) {
                console.error('Error saving results:', error);
            }
        }
        
        function copyShareLink() {
            const linkInput = document.getElementById('shareLink');
            linkInput.select();
            linkInput.setSelectionRange(0, 99999);
            navigator.clipboard.writeText(linkInput.value);
            document.getElementById('copyConfirm').style.display = 'block';
            setTimeout(() => {
                document.getElementById('copyConfirm').style.display = 'none';
            }, 3000);
        }
        
        async function sendReport() {
            const firstName = document.getElementById('userName').value.trim();
            const email = document.getElementById('userEmail').value.trim();
            const formError = document.getElementById('formError');
            
            // Clear previous errors
            formError.style.display = 'none';
            
            // Validate first name
            if (!firstName || firstName.length < 1) {
                formError.textContent = 'Please enter your first name';
                formError.style.display = 'block';
                document.getElementById('userName').focus();
                return;
            }
            
            // Validate email
            if (!email || !email.includes('@') || !email.includes('.')) {
                formError.textContent = 'Please enter a valid email address';
                formError.style.display = 'block';
                document.getElementById('userEmail').focus();
                return;
            }
            
            const schedule = calculateSleepSchedule();
            const tips = generateTips();
            const products = getProductRecommendations();
            
            try {
                const response = await fetch(`${APPWRITE_ENDPOINT}/functions/${APPWRITE_FUNCTION_ID}/executions`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Appwrite-Project': APPWRITE_PROJECT_ID
                    },
                    body: JSON.stringify({
                        body: JSON.stringify({
                            email: email,
                            firstName: firstName,
                            toolName: 'shift-worker-sleep-planner',
                            userData: userData,
                            schedule: schedule,
                            tips: tips,
                            products: products
                        })
                    })
                });
                
                if (response.ok) {
                    document.getElementById('emailSuccess').style.display = 'block';
                    document.getElementById('userEmail').disabled = true;
                    document.getElementById('userName').disabled = true;
                } else {
                    throw new Error('Failed to send email');
                }
            } catch (error) {
                console.error('Error sending report:', error);
                formError.textContent = 'Sorry, there was an error sending your report. Please try again.';
                formError.style.display = 'block';
            }
        }
    </script>
</body>
</html>
